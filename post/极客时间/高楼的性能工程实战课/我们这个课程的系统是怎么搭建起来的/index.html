<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>我们这个课程的系统是怎么搭建起来的？ - Docs</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="你好，我是高楼。
在我们这个课程里，为了让你更好地理解我的性能工程理念，我专门搭建了一个完整的系统，我们所有的内容都是基于这个系统展开的。
自课程更新以来，有不少同学问我要这个系统的搭建教程，想自己试一试。因此，我梳理了一版搭建教程，希望能帮到你。
" /><meta name="keywords" content="技术文档, docs, 极客时间" />






<meta name="generator" content="Hugo 0.140.2 with theme even" />


<link rel="canonical" href="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/%E6%88%91%E4%BB%AC%E8%BF%99%E4%B8%AA%E8%AF%BE%E7%A8%8B%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%98%AF%E6%80%8E%E4%B9%88%E6%90%AD%E5%BB%BA%E8%B5%B7%E6%9D%A5%E7%9A%84/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/%E6%88%91%E4%BB%AC%E8%BF%99%E4%B8%AA%E8%AF%BE%E7%A8%8B%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%98%AF%E6%80%8E%E4%B9%88%E6%90%AD%E5%BB%BA%E8%B5%B7%E6%9D%A5%E7%9A%84/">
  <meta property="og:site_name" content="Docs">
  <meta property="og:title" content="我们这个课程的系统是怎么搭建起来的？">
  <meta property="og:description" content="你好，我是高楼。
在我们这个课程里，为了让你更好地理解我的性能工程理念，我专门搭建了一个完整的系统，我们所有的内容都是基于这个系统展开的。
自课程更新以来，有不少同学问我要这个系统的搭建教程，想自己试一试。因此，我梳理了一版搭建教程，希望能帮到你。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:tag" content="高楼的性能工程实战课">

  <meta itemprop="name" content="我们这个课程的系统是怎么搭建起来的？">
  <meta itemprop="description" content="你好，我是高楼。
在我们这个课程里，为了让你更好地理解我的性能工程理念，我专门搭建了一个完整的系统，我们所有的内容都是基于这个系统展开的。
自课程更新以来，有不少同学问我要这个系统的搭建教程，想自己试一试。因此，我梳理了一版搭建教程，希望能帮到你。">
  <meta itemprop="datePublished" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="6239">
  <meta itemprop="keywords" content="高楼的性能工程实战课">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="我们这个课程的系统是怎么搭建起来的？">
  <meta name="twitter:description" content="你好，我是高楼。
在我们这个课程里，为了让你更好地理解我的性能工程理念，我专门搭建了一个完整的系统，我们所有的内容都是基于这个系统展开的。
自课程更新以来，有不少同学问我要这个系统的搭建教程，想自己试一试。因此，我梳理了一版搭建教程，希望能帮到你。">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Docs</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Docs</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">我们这个课程的系统是怎么搭建起来的？</h1>

      <div class="post-meta">
        <span class="post-time"> 10100-01-10 </span>
        <div class="post-category">
            <a href="/categories/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"> 极客时间 </a>
            </div>
          <span class="more-meta"> 约 6239 字 </span>
          <span class="more-meta"> 预计阅读 13 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#一物理服务器">一。物理服务器</a>
          <ul>
            <li><a href="#1-服务器规划">1. 服务器规划</a></li>
            <li><a href="#2-服务器搭建">2. 服务器搭建</a></li>
          </ul>
        </li>
        <li><a href="#二虚拟化">二。虚拟化</a>
          <ul>
            <li><a href="#1-虚拟机规划">1. 虚拟机规划</a></li>
            <li><a href="#2-虚机安装">2. 虚机安装</a></li>
          </ul>
        </li>
        <li><a href="#三kubernetes-集群">三。Kubernetes 集群</a>
          <ul>
            <li><a href="#1-计算资源">1. 计算资源</a></li>
            <li><a href="#2-集群搭建">2. 集群搭建</a></li>
            <li><a href="#3-插件安装">3. 插件安装</a></li>
            <li><a href="#4-kubernetes-管理平台">4. Kubernetes 管理平台</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#可在第一个-master-节点上执行此命令">可在第一个 Master 节点上执行此命令</a>
      <ul>
        <li><a href="#四依赖组件">四。依赖组件</a>
          <ul>
            <li><a href="#1-部署清单">1. 部署清单</a></li>
            <li><a href="#2-安装部署">2. 安装部署</a></li>
          </ul>
        </li>
        <li><a href="#五监控组件">五。监控组件</a>
          <ul>
            <li><a href="#1-全局监控">1. 全局监控</a></li>
            <li><a href="#2-部署清单">2. 部署清单</a></li>
            <li><a href="#3-安装部署">3. 安装部署</a></li>
          </ul>
        </li>
        <li><a href="#六微服务">六。微服务</a>
          <ul>
            <li><a href="#1-项目介绍">1. 项目介绍</a></li>
            <li><a href="#2-拉取源代码">2. 拉取源代码</a></li>
            <li><a href="#3-修改-nacos-配置">3. 修改 Nacos 配置</a></li>
            <li><a href="#4-镜像打包及推送">4. 镜像打包及推送</a></li>
            <li><a href="#5-导入数据库">5. 导入数据库</a></li>
            <li><a href="#6-初始化依赖组件">6. 初始化依赖组件</a></li>
            <li><a href="#7-使用-yaml-资源文件部署应用">7. 使用 yaml 资源文件部署应用</a></li>
          </ul>
        </li>
        <li><a href="#七运行效果展示">七。运行效果展示</a>
          <ul>
            <li><a href="#1-服务器">1. 服务器</a></li>
            <li><a href="#2-虚拟机">2. 虚拟机</a></li>
            <li><a href="#3-kubernetes-集群">3. Kubernetes 集群</a></li>
            <li><a href="#4-微服务">4. 微服务</a></li>
            <li><a href="#5-资源监控">5. 资源监控</a></li>
          </ul>
        </li>
        <li><a href="#八总结">八。总结</a></li>
        <li><a href="#参考资料汇总">参考资料汇总</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>你好，我是高楼。</p>
<p>在我们这个课程里，为了让你更好地理解我的性能工程理念，我专门搭建了一个完整的系统，我们所有的内容都是基于这个系统展开的。</p>
<p>自课程更新以来，有不少同学问我要这个系统的搭建教程，想自己试一试。因此，我梳理了一版搭建教程，希望能帮到你。</p>
<p>由于整个系统相对复杂，有很多需要考虑、部署的细节，所以这节课的内容会比较长。下面这张图是我们这节课的目录，你可以整体了解一下，然后对应这张目录图，来学习具体的搭建步骤，以免迷失方向。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/aa2c927c04ea283847ac3904cc5ad487.png" alt=""></p>
<h2 id="一物理服务器">一。物理服务器</h2>
<h3 id="1-服务器规划">1. 服务器规划</h3>
<p>在这个系统中，我们主要用到了四台服务器，下面是具体的硬件配置：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/36ebb8ea0cff2d72f056fc84e737d404.png" alt=""></p>
<p>我们可以看到，当前服务器在应用中使用的资源总共是 64C 的 CPU 资源，以及 128 G 的内存资源。由于 NFS (网络存储) 服务器不用在应用中，我们不计算在内。</p>
<p>因为单台机器的硬件资源相对较多，所以，在后续的工作中，我们将这些物理机化为虚拟机使用，以方便应用的管理。</p>
<p>在成本上，所有物理机的费用加在一起大概八万元左右，这其中还包括交换机、机柜、网线等各类杂七杂八的费用。</p>
<h3 id="2-服务器搭建">2. 服务器搭建</h3>
<p>目前，行业内主流的基于 x86 架构的 Linux 系统，无非是 CentOS 和 Ubuntu。在我们这个项目中，我选择 CentOS 系列来搭建 Linux 系统，主要是考虑到系统的稳定性。CentOS 来自 Redhat 商业版本的重新编译，它在稳定性、系统优化以及兼容性方面，具有比较完善的测试和发版流程。</p>
<p>在 CentOS 7 之后的版本中，CentOS 的内核换成了 Linux 3.x，因此，我们这个课程的分析都是基于 Linux 3.x 这个内核版本展开的。</p>
<p>在搭建过程中，我们给每台服务器都安装了 CentOS 7.8 的操作系统。如果你是新手，我建议你使用带 GUI 桌面的系统，方便后续操作和管理虚拟机。具体的操作系统安装步骤，你可以参考这个链接来部署： HP 服务器安装 CentOS 7 。</p>
<h2 id="二虚拟化">二。虚拟化</h2>
<h3 id="1-虚拟机规划">1. 虚拟机规划</h3>
<p>我们接着来看虚拟机规划。我们部署了至少五台虚机，并且把虚拟机类型分为两种主机节点类型：</p>
<ol>
<li>普通节点：</li>
</ol>
<p>普通节点用来做非被测系统使用，比如压力机、管理平台等。我们可以选择采用 Docker、二进制等方式来部署。</p>
<ol>
<li>Kubernetes 节点：</li>
</ol>
<p>Kubernetes 节点用于部署项目的应用服务，包括 mall-admin、mall-portal、mall-gateway、mall-member、mall-cart 等应用服务，还包括 SkyWalking、Nacos 等基础组件。这些都采用 Kubernetes 的方式来部署。</p>
<p>具体的节点规划，你可以参考这张表：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/8586426648f010b1027ec7b5aec0ad4f.png" alt=""></p>
<p>在这里，我们规划了三个 Kubernetes 控制节点，这是为后续的高可用方案准备的。如果你计划搭建单 Master 集群，只需要一个 Kubernetes 控制节点即可。至于 Kubernetes 计算节点，结合前面的节点规划，我们在这里配置 9 个 worker 节点，其他的节点根据自己的需求灵活扩展。</p>
<h3 id="2-虚机安装">2. 虚机安装</h3>
<p>到了安装虚拟机这一步，我们最终选择以 KVM 为主的方案。这主要考虑到，KVM 是目前比较成熟的开源虚拟化平台，在 2006 年被写入到 Linux 内核中。并且在 RedHat 6 以后，RedHat 开始转向支持 KVM，而非之前大力推广的 Xen 虚拟化方案，随后 Intel 也开始全面支持 KVM。KVM 相比较于 Xen，更小，更轻量级，也更方便管理。</p>
<p>在项目搭建之初，我们也尝试过用 OpenStack 做底层，但是 OpenStack 部署起来不仅繁杂，而且坑也多，需要投入大量的时间成本。我们当时在分析 OpenStack 本身的问题上花费了很多时间，对于我们的这个系统来说，这是没有必要的。</p>
<p>所以，我们最终选择用 KVM 来做虚拟化，它的技术相对成熟，操作又比较简单。</p>
<p>你可能会有疑问，为什么不用 VMware 呢？我们知道，在虚拟化平台中，VMware 在 IO 和稳定性方面都算是目前最优的一个方案了，也能满足我们的需求。不过，它是一款商业软件，授权比较昂贵，这是我们这个项目不得不放弃的一个原因。当然，如果你的项目有充足的预算，VMware 是一个不错的选择。</p>
<p>在安装之前，你可以大概了解一下 KVM 性能、热迁移、稳定性、应用移植、搭建等方面的注意事项，做为知识的扩展补充。对性能分析来说，我们要关注一下 KVM 的优化重点：关于 KVM 虚拟化注意的二三事整理</p>
<p>至于 KVM 的安装和使用，你可以参考这个链接里的内容：Linux KVM 安装使用手册。</p>
<h2 id="三kubernetes-集群">三。Kubernetes 集群</h2>
<h3 id="1-计算资源">1. 计算资源</h3>
<p>关于集群计算资源，你可以参考这张表：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/dbaf907b70357721b5e8d19e1ab9c6a9.png" alt=""></p>
<p>我们在做计算资源规划的时候，通常需要考虑不同的应用场景：</p>
<ol>
<li>传统虚拟化技术的 I/O 损耗较大，对于 I/O 密集型应用，物理机相比传统虚拟机（像 VMware 的传统虚拟化做出来的虚拟机) 有更好的性能表现；</li>
<li>在物理机上部署应用，有更少的额外资源开销（如虚拟化管理、虚拟机操作系统等），并且可以有更高的部署密度，来降低基础设施成本；</li>
<li>在物理机上可以更加灵活地选择网络、存储等设备和软件应用生态。</li>
</ol>
<p>如果从实际生产环境考虑，一般而言建议：</p>
<ol>
<li>对性能极其敏感的应用，如高性能计算，物理机是较好的选择；</li>
<li>云主机支持热迁移，可以有效降低运维成本；</li>
<li>在工作实践中，我们会为 Kubernetes 集群划分静态资源池和弹性资源池。通常而言，固定资源池可以根据需要选择物理机或者云主机实例；弹性资源池则可以根据应用负载，使用合适规格的云主机实例来优化成本，避免资源浪费，同时提升弹性供给保障。</li>
</ol>
<p>由于我们这个系统只是课程的示例项目，为了尽可能压榨服务器资源，节省服务器成本，我们选择了自行准备虚机的方案，这样可以充分使用硬件资源。</p>
<h3 id="2-集群搭建">2. 集群搭建</h3>
<p>关于集群搭建，我们的节点规划如下：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/26a95d130af695a93ac5ced1ef950988.png" alt=""></p>
<p>关于集群搭建的具体步骤，你可以按照下面这两个文档进行部署：</p>
<ol>
<li>单 Master 集群：使用 kubeadm 安装单 master kubernetes 集群（脚本版）</li>
<li>高可用方案： Kubernetes 高可用集群落地二三事</li>
</ol>
<p>安装的负载均衡组件如下：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/96ee2b710066b28816861d10b0716af0.png" alt=""></p>
<p>如果你没有 Kubernetes 的使用基础，那么我建议学习一下这几篇入门文章：</p>
<ol>
<li>Kubernetes 集群基本概念</li>
<li>k8s 入门篇 -Kubernetes 的基本概念和术语</li>
<li>K8s 命令篇 -Kubernetes 工作实用命令集结号</li>
<li>Kubernetes 集群常用操作总结</li>
</ol>
<h3 id="3-插件安装">3. 插件安装</h3>
<p>我们需要安装的插件主要有三种：网络插件、存储插件以及组件。</p>
<p>对于网络插件，我们选用的是目前主流的网络插件 Calico。如果你的系统有其它选型需求，那你可以参考下面这篇文章，这里我就不做赘述了。</p>
<ol>
<li>Kubernetes 网络插件（CNI）超过 10Gbit/s 的基准测试结果</li>
</ol>
<p>安装 Calico 插件的具体步骤，在前面的单 Master 集群部署文档中已有说明，你可以参考一下。</p>
<p>对于存储插件，我们选用的是 NFS 网络存储。因为 NFS 相对简单，上手快，我们只需要部署一个 NFS 服务，再由 Kubernetes 提供一个自动配置卷程序，然后通过 StoageClass 动态配置 PVC 就可以了。而且在性能上，NFS 也能满足我们这个系统的需求。</p>
<p>只不过，NFS 并不是高可用方案。如果你是在生产环境中使用，可以考虑把 Ceph 作为存储选型方案。Ceph 是一个统一的分布式存储系统，也是高可用存储方案，并且可以提供比较好的性能、可靠性和可扩展性。但是，Ceph 部署起来更复杂些，同时维护也比 NFS 复杂。</p>
<p>我把 NFS 和 Ceph 的详细安装步骤放在这里，你如果有需要，可以学习参考。</p>
<ol>
<li>NFS： Kubernetes 集群部署 NFS 网络存储</li>
<li>Ceph： Kubernetes 集群分布式存储插件 Rook Ceph 部署</li>
</ol>
<p>另外，不要忘了，NFS 配置中还需要这两个组件：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/df1007a0486cca006b24f60506d7ddce.png" alt=""></p>
<h3 id="4-kubernetes-管理平台">4. Kubernetes 管理平台</h3>
<p>安装组件：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/91711120f27c998e353f9fd16b7256b8.png" alt=""></p>
<p>Kuboard 采用的是可视化 UI 的方式来管理应用和组件，降低了 Kubernetes 集群的使用门槛。下面我们看看怎么部署 Kuboard 组件。</p>
<p>第一步，k8s 集群执行资源文件：</p>
<p>kubectl apply -f <a href="https://kuboard.cn/install-script/kuboard.yaml">https://kuboard.cn/install-script/kuboard.yaml</a><br>
kubectl apply -f <a href="https://addons.kuboard.cn/metrics-server/0.3.7/metrics-server.yaml">https://addons.kuboard.cn/metrics-server/0.3.7/metrics-server.yaml</a></p>
<p>第二步，把 Kuboard 安装好后，我们看一下 Kuboard 的运行状态：</p>
<p>kubectl get pods -l k8s.kuboard.cn/name=kuboard -n kube-system</p>
<p>输出结果：</p>
<p>NAME                       READY   STATUS        RESTARTS   AGE<br>
kuboard-54c9c4f6cb-6lf88   1/1     Running       0          45s</p>
<p>这个结果表明 kuboard 已经成功部署了。</p>
<p>接着，我们获取管理员 Token。这一步是为了登录访问 Kuboard，检查组件是否成功运行。</p>
<h1 id="可在第一个-master-节点上执行此命令">可在第一个 Master 节点上执行此命令</h1>
<p>echo $(kubectl -n kube-system get secret $(kubectl -n kube-system get secret | grep kuboard-user | awk &lsquo;{print $1}&rsquo;) -o go-template=&rsquo;{{.data.token}}&rsquo; | base64 -d)</p>
<p>通过检查部署我们了解到，Kuboard Service 使用了 NodePort 的方式暴露服务，NodePort 为 32567。因此，我们可以按照下面这个方式访问 Kuboard：</p>
<p>http://任意一个 Worker 节点的 IP 地址:32567/</p>
<p>然后，在登录中输入管理员 Token，就可以进入到 Kuboard 集群的概览页了。</p>
<p>注意，如果你使用的是阿里云、腾讯云等云服务，那么你可以在对应的安全组设置里，开放 worker 节点 32567 端口的入站访问，你也可以修改 Kuboard.yaml 文件，使用自己定义的 NodePort 端口号。</p>
<h2 id="四依赖组件">四。依赖组件</h2>
<h3 id="1-部署清单">1. 部署清单</h3>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/55d3bacd3745616076f8d238227c4a6e.png" alt=""></p>
<h3 id="2-安装部署">2. 安装部署</h3>
<p>对于上述依赖组件的安装部署，我整理了对应的教程放在这里，你有兴趣可以尝试一下。</p>
<p>MySQL 的二进制安装方式，在网上的教程多如牛毛，我在这里就不介绍了，如果你想知道怎么在 Kubernetes 下部署 MySQL，你可以参考这个链接中的详细步骤：如何在 Kubernetes 集群中搭建一个复杂的 MySQL 数据库。</p>
<p>Elasticsearch 集群的部署可以参考：</p>
<ol>
<li>Kubernetes Helm3 部署 Elasticsearch &amp; Kibana 7 集群</li>
</ol>
<p>JMeter 的部署可以参考：</p>
<ol>
<li>二进制：性能工具之 JMeter+InfluxDB+Grafana 打造压测可视化实时监控</li>
<li>Kubernetes：Kubernetes 下部署 Jmeter 集群</li>
</ol>
<p>镜像仓库 Harbor 的部署可以参考：</p>
<ol>
<li>Kubernetes 集群仓库 harbor Helm3 部署</li>
</ol>
<p>Nacos 的部署可以参考：</p>
<ol>
<li>Docker 单机模式： Nacos Docker 快速开始</li>
<li>Kubernetes：Kubernetes Nacos</li>
</ol>
<p>Redis、RabbitMQ、MongoDB 单机部署的部署可以参考：</p>
<ol>
<li>Kubernetes 集群监控 kube-prometheus 自动发现</li>
</ol>
<p>Logstash 的部署可以参考：</p>
<ol>
<li>整合 ELK 实现日志收集</li>
</ol>
<h2 id="五监控组件">五。监控组件</h2>
<h3 id="1-全局监控">1. 全局监控</h3>
<p>不知道你还记不记得，我们这个系统的架构：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/dd0f6a1777cff85a24d9f451a9c5a852.png" alt=""></p>
<p>根据这个系统的架构，我们选择的工具要监控到这几个层面：</p>
<ol>
<li>第一层，物理主机；</li>
<li>第二层，KVM 虚拟机；</li>
<li>第三层，Kubernetes 套件；</li>
<li>第四层，各种应用所需要的技术组件。</li>
</ol>
<p>其实，有了上面的系统架构，监控设计就已经出现在写方案之人的脑袋里了。对于我们这个课程所用的系统，全局监控如下所示：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/f6ca3050619d300123ca5ab7e747a785.png" alt=""></p>
<p>从上图来看，我们使用 Prometheus/Grafana/Spring Boot Admin/SkyWalking/Weave Scope/ELK/EFK 就可以实现具有全局视角的第一层监控。对于工具中没有覆盖的第一层计数器，我们只能在执行场景时再执行命令来补充了。</p>
<h3 id="2-部署清单">2. 部署清单</h3>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/0463d5a2a696f89716d9cefb2942cb60.png" alt=""></p>
<h3 id="3-安装部署">3. 安装部署</h3>
<p>对于上面这些监控工具的部署，我也把相应的安装教程放在这里，供你参考学习。</p>
<p>Kubernetes 集群资源监控的部署：</p>
<ol>
<li>Kubernetes 集群监控 kube-prometheus 部署</li>
<li>Kubernetes 集群监控 controller-manager &amp; scheduler 组件</li>
<li>Kubernetes 集群监控 ETCD 组件</li>
</ol>
<p>日志聚合部署的部署：</p>
<ol>
<li>Kubernetes 集群日志监控 EFK 安装</li>
</ol>
<p>依赖组件的部署：</p>
<ol>
<li>Kubernetes 集群监控 kube-prometheus 自动发现</li>
</ol>
<p>APM 链路跟踪的部署：</p>
<ol>
<li>Kubernetes + Spring Cloud 集成链路追踪 SkyWalking</li>
</ol>
<h2 id="六微服务">六。微服务</h2>
<h3 id="1-项目介绍">1. 项目介绍</h3>
<p>在搭建这个课程所用的系统时，我采用了微服务的架构，这也是当前主流的技术架构。</p>
<p>如果你有兴趣了解详细的项目介绍，可以参考这篇文章：《高楼的性能工程实战课》微服务电商项目技术全解析。这里面主要介绍了该项目的一些预备知识、系统结构、主要技术栈以及核心组件。此外，还有相关的运行效果截图。</p>
<h3 id="2-拉取源代码">2. 拉取源代码</h3>
<p>我们把 git clone 项目源代码下载到本地，来部署我们的被测系统：</p>
<p>git clone <a href="https://github.com/xncssj/7d-mall-microservice.git">https://github.com/xncssj/7d-mall-microservice.git</a></p>
<h3 id="3-修改-nacos-配置">3. 修改 Nacos 配置</h3>
<p>我们先将项目 config 目录下的配置包导入到 Nacos 中，然后根据自己的实际需要修改相关配置。</p>
<p>接着，我们将配置信息导入到 Nacos 中后，会显示这样的信息：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/c2f616e98ea946c68ddfa6bb16dc9402.png" alt=""></p>
<p>请你注意，我们修改的配置文件主要是每个单体服务下的 application-prod.yml 和 bootstrap-prod.yml。因为两个全局配置文件，都是服务容器内加载的配置文件。</p>
<h3 id="4-镜像打包及推送">4. 镜像打包及推送</h3>
<p>我们使用 Java 语言的 IDE（推荐 IDEA）打开项目工程。</p>
<p>首先，修改项目根目录下的 pom.xml 文件：</p>
<properties>  
    <!--改为你自己的 Docker 服务远程访问地址-->  
    <docker.host>http://172.16.106.237:2375</docker.host>  
</properties>
<p>在 IDEA 的右边 Maven 标签页，我们可以找到 root 工程下的 package 按钮，选中并执行：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/6dde0bf13f1e5d6e50b13899cd8d8c84.png" alt=""></p>
<p>然后，在编译的远程 Docker 主机上，我们修改所有服务的镜像标签名称。之后，再推送镜像到 Docker 仓库。</p>
<h3 id="5-导入数据库">5. 导入数据库</h3>
<p>这一步需要将项目 document/sql 目录下的 SQL 脚本导入到 MySQL 数据库中。</p>
<h3 id="6-初始化依赖组件">6. 初始化依赖组件</h3>
<h4 id="61-rabbitmq">6.1. RabbitMQ</h4>
<p>第一步，进入 RabbitMQ 容器并开启管理功能：</p>
<p>#登录容器的时候需要注意到容器支持的 shell 是什么。<br>
kubectl exec -it <pod-name> -n <ns-name> bash<br>
kubectl exec -it <pod-name> -n <ns-name> sh</p>
<p>root@cloud-rabbitmq-5b49d784c-gbr8m:/# rabbitmq-plugins enable rabbitmq_management<br>
Enabling plugins on node rabbit@cloud-rabbitmq-5b49d784c-gbr8m:<br>
rabbitmq_management<br>
The following plugins have been configured:<br>
rabbitmq_management<br>
rabbitmq_management_agent<br>
rabbitmq_web_dispatch<br>
Applying plugin configuration to rabbit@cloud-rabbitmq-5b49d784c-gbr8m&hellip;<br>
Plugin configuration unchanged.</p>
<p>因为 RabbitMQ Service 使用 NodePort 的方式暴露控制台地址，比如 NodePort 为 15672。所以，第二步，我们访问地址 http:// 计算节点 IP:15672/ 地址，查看是否安装成功：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/f9a1203e3516a435dfa6297be5dade18.png" alt=""></p>
<p>第三步，输入账号密码并登录 guest/guest。</p>
<p>第四步，创建帐号并设置其角色为管理员 mall/mall。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/2d7e4b429fe6d29493ff77005f0c7db5.png" alt=""></p>
<p>第五步，创建一个新的虚拟 host 为 /mall。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/58e58a8ae688954522d806e751a3cc4c.png" alt=""></p>
<p>第六步，点击 mall 用户进入用户配置页面，给 mall 用户配置该虚拟 host 的权限。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/0ac627e421e6251ef9ec73c245c752d8.png" alt=""></p>
<p>到这里，RabbitMQ 的初始化就完成了。</p>
<h4 id="62-elasticsearch">6.2. Elasticsearch</h4>
<p>安装中文分词器 IKAnalyzer，并重新启动：</p>
<p>#此命令需要在容器中运行<br>
elasticsearch-plugin install <a href="https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip">https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip</a></p>
<h3 id="7-使用-yaml-资源文件部署应用">7. 使用 yaml 资源文件部署应用</h3>
<p>将项目 document/k8s 目录下的 yaml 资源文件中的 Dokcer 镜像，修改为自己的 Tag 并上传到 k8s 集群中执行：</p>
<p>kubectl apply -f k8s/</p>
<h2 id="七运行效果展示">七。运行效果展示</h2>
<h3 id="1-服务器">1. 服务器</h3>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/fb34f6d5067941a3bdbab6dd5eca40da.png" alt=""></p>
<h3 id="2-虚拟机">2. 虚拟机</h3>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/e559032bc99ae63a6a5fe11e064f8e07.png" alt=""></p>
<h3 id="3-kubernetes-集群">3. Kubernetes 集群</h3>
<p>Kubernetes 集群：</p>
<p>[root@k8s-master-1 ~]# kubectl get nodes<br>
NAME           STATUS   ROLES    AGE   VERSION<br>
k8s-master-1   Ready    master   26d   v1.19.2<br>
k8s-master-2   Ready    master   26d   v1.19.2<br>
k8s-master-3   Ready    master   26d   v1.19.2<br>
k8s-worker-1   Ready    <none>   26d   v1.19.2<br>
k8s-worker-2   Ready    <none>   26d   v1.19.2<br>
k8s-worker-3   Ready    <none>   26d   v1.19.2<br>
k8s-worker-4   Ready    <none>   26d   v1.19.2<br>
k8s-worker-5   Ready    <none>   26d   v1.19.2<br>
k8s-worker-6   Ready    <none>   26d   v1.19.2<br>
k8s-worker-7   Ready    <none>   26d   v1.19.2<br>
k8s-worker-8   Ready    <none>   26d   v1.19.2<br>
k8s-worker-9   Ready    <none>   26d   v1.19.2<br>
[root@k8s-master-1 ~]#</p>
<p>微服务管理：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/e57793aee9960cafc08c9d20b96339dd.png" alt=""></p>
<h3 id="4-微服务">4. 微服务</h3>
<p>部署架构图：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/fafe882d5c1a905c34b8b9a52043820d.png" alt=""></p>
<p>API 文档：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/156997c652659449ce0f33a4832cdb6f.png" alt=""></p>
<p>调用链监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/4cb84086883beccd6808221464353199.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/1f3435bae4cc869a588ff98b4a617d36.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/b518ca699c18efd50addc99fa752690a.png" alt=""></p>
<p>服务注册：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/c2f616e98ea946c68ddfa6bb16dc9402.png" alt=""></p>
<p>服务监控:</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/fe73ecc672395b690b3e3fc825b147ca.png" alt=""></p>
<p>日志聚合：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/b59ca5d2255be233a70c17ebf715d7f9.png" alt=""></p>
<p>配置管理：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/6faa29ac6917d2b43fc1a46067220854.png" alt=""></p>
<p>系统保护：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/3d6073576d2c4d34e199bead23bb532f.png" alt=""></p>
<p>容器仓库：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/0d4d05692026565154e296269a74048e.png" alt=""></p>
<p>压力引擎：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/c66afd1e48a8b839667895800f1d1f27.png" alt=""></p>
<h3 id="5-资源监控">5. 资源监控</h3>
<p>Kubernetes 集群资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/1feadcf307ff15be9212c538594938f4.png" alt=""></p>
<p>Linux 资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/bffa4c6fccdce2846580eabb234ac0ba.png" alt=""></p>
<p>MySQL 资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/73f9f2a5ff11946e075f475df7a2251b.png" alt=""></p>
<p>RabbitMQ 资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/e80cc4d8493361be47f20c39f2e5c4d7.png" alt=""></p>
<p>MongoDB 数据库资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/c2c5eab36d4bc060cfc246f8e9c9108f.png" alt=""></p>
<p>Kubernetes etcd 资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/be5ef17e31647073d3fa1935896100dd.png" alt=""></p>
<p>Kubernetes API Server 资源监控：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/9e0e64dac86aff842836c7c124f2cb53.png" alt=""></p>
<p>Kubernetes 服务拓扑：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/4eb1024e6edc7533dd7401c2df280b3b.png" alt=""></p>
<h2 id="八总结">八。总结</h2>
<p>这节课的内容包括了物理环境的说明、技术组件的具体搭建过程、示例系统的搭建过程以及运行效果。经过上面所有的步骤，我们就把整个课程涉及的所有技术组件、示例系统完全搭建起来了。</p>
<p>而我之所以选择这样的技术栈，主要有三方面的考虑：</p>
<p><strong>1. 核心优势</strong></p>
<ol>
<li>任务调度：为集群系统中的任务提供调度服务，自动将服务按资源需求分配到资源限制的计算节点；</li>
<li>资源隔离：为产品提供管控与服务节点隔离能力，保证研发应用和管控服务不产生相互的影响；</li>
<li>高可用能力：自动监控服务运行，根据运行情况对失效的服务进行自动重启恢复；</li>
<li>网络互联互通能力：提供统一的 IP 地址分配和网络互通能力；</li>
<li>统一编排管理能力：结合 Gitlab 和 k8s，对输出的产品进行统一的编排管理；</li>
<li>公共产品组件可以为团队提供统一部署、验证、授权、调度和管控能力，为私有云服务提供基础性的支撑。</li>
</ol>
<p><strong>2. 核心设施平台（IaaS 云）</strong></p>
<ol>
<li>提供计算、网络、存储等核心资源设备的虚拟化；</li>
<li>支持不同操作系统，包括主流的 Win 和 Linux 系统；</li>
<li>提供主要的三种服务：云主机、云网络、云硬盘；</li>
<li>提供可视化 Web UI；</li>
<li>提供 k8s 集群（容器云）规划、部署和运营；</li>
<li>支持多种计算、存储和网络方案。</li>
</ol>
<p><strong>3. 基础服务平台（PaaS 云）</strong></p>
<ol>
<li>提供数据存储：支持常见 NFS、Ceph RBD、Local Volume 等；</li>
<li>提供应用服务：支持自愈和自动伸缩、调度和发布、负载均衡等；</li>
<li>提供运维管理：支持日志监控、资源监控、消息告警等。</li>
</ol>
<p>我们这个系统采用的技术栈，是当前技术市场中流行的主流技术栈，这样的环境具有很高的借鉴价值。而且，从我们要表达的 RESAR 性能分析架构和逻辑来说，也说明 RESAR 性能分析理念是足以支撑当前的技术栈的。</p>
<h2 id="参考资料汇总">参考资料汇总</h2>
<p><strong>1. CentOS 7 的部署</strong>：HP 服务器安装 CentOS 7</p>
<p><strong>2. KVM 的优化重点</strong>：关于 KVM 虚拟化注意的二三事整理</p>
<p><strong>3. KVM 的安装和使用</strong>：Linux KVM 安装使用手册</p>
<p><strong>4. Kubernetes 集群搭建</strong>：</p>
<ol>
<li>单 Master 集群：使用 kubeadm 安装单 master kubernetes 集群（脚本版）</li>
<li>高可用方案： Kubernetes 高可用集群落地二三事</li>
</ol>
<p><strong>5. Kubernetes 的使用基础</strong>：</p>
<ol>
<li>Kubernetes 集群基本概念</li>
<li>k8s 入门篇 -Kubernetes 的基本概念和术语</li>
<li>K8s 命令篇 -Kubernetes 工作实用命令集结号</li>
<li>Kubernetes 集群常用操作总结</li>
</ol>
<p><strong>6. Kubernetes 网络插件选型</strong>：Kubernetes 网络插件（CNI）超过 10Gbit/s 的基准测试结果</p>
<p><strong>7. NFS 部署</strong>： Kubernetes 集群部署 NFS 网络存储</p>
<p><strong>8. Ceph 部署</strong>： Kubernetes 集群分布式存储插件 Rook Ceph 部署</p>
<p><strong>9. Kubernetes 下的 MySQL 部署</strong>：如何在 Kubernetes 集群中搭建一个复杂的 MySQL 数据库</p>
<p><strong>10. Elasticsearch 集群的部署</strong>：Kubernetes Helm3 部署 Elasticsearch &amp; Kibana 7 集群</p>
<p><strong>11. JMeter 的部署</strong>：</p>
<ol>
<li>二进制：性能工具之 JMeter+InfluxDB+Grafana 打造压测可视化实时监控</li>
<li>Kubernetes：Kubernetes 下部署 Jmeter 集群</li>
</ol>
<p><strong>12. 镜像仓库 Harbor 的部署</strong>：Kubernetes 集群仓库 harbor Helm3 部署</p>
<p><strong>13. Nacos 的部署</strong>：</p>
<ol>
<li>Docker 单机模式： Nacos Docker 快速开始</li>
<li>Kubernetes：Kubernetes Nacos</li>
</ol>
<p><strong>14. Redis、RabbitMQ、MongoDB 单机部署的部署</strong>：Kubernetes 集群监控 kube-prometheus 自动发现</p>
<p><strong>15. Logstash 的部署</strong>：整合 ELK 实现日志收集</p>
<p><strong>16. Kubernetes 集群资源监控的部署</strong>：</p>
<ol>
<li>Kubernetes 集群监控 kube-prometheus 部署</li>
<li>Kubernetes 集群监控 controller-manager &amp; scheduler 组件</li>
<li>Kubernetes 集群监控 ETCD 组件</li>
</ol>
<p><strong>17. 日志聚合部署的部署</strong>：Kubernetes 集群日志监控 EFK 安装</p>
<p><strong>18. 依赖组件的部署</strong>：Kubernetes 集群监控 kube-prometheus 自动发现</p>
<p><strong>19. APM 链路跟踪的部署</strong>：Kubernetes + Spring Cloud 集成链路追踪 SkyWalking</p>
<p><strong>20. 微服务项目介绍</strong>：《高楼的性能工程实战课》微服务电商项目技术全解析</p>
<p><strong>21. 其他学习资料推荐</strong>：</p>
<ol>
<li>SpringCloud 日志在压测中的二三事</li>
<li>高楼的性能工程实战课之脚本开发</li>
<li>《高楼的性能工程实战课》学习所推荐的知识点</li>
</ol>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content"></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        10100-01-10
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E9%AB%98%E6%A5%BC%E7%9A%84%E6%80%A7%E8%83%BD%E5%B7%A5%E7%A8%8B%E5%AE%9E%E6%88%98%E8%AF%BE/">高楼的性能工程实战课</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B300%E8%AE%B2/%E6%B8%A9%E6%95%85%E8%80%8C%E7%9F%A5%E6%96%B0__%E4%B8%80%E9%94%AE%E7%9B%B4%E8%BE%BE%E5%85%AD%E5%A4%A7%E6%96%87%E7%AB%A0%E4%B8%BB%E9%A2%98%E7%B4%A2%E5%BC%95/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">温故而知新__一键直达，六大文章主题索引</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/%E6%88%91%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E4%BD%9C%E8%B6%A3%E8%B0%88%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E4%B8%93%E6%A0%8F%E7%9A%84/">
            <span class="next-text nav-default">我是如何创作“趣谈网络协议”专栏的？</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2024 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FVZ07KBD4X"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FVZ07KBD4X');
        }
      </script>






</body>
</html>
