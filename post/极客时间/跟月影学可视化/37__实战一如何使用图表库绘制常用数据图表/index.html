<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>37__实战（一）：如何使用图表库绘制常用数据图表？ - Docs</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="你好，我是月影。
图表是我们在可视化中展示数据常用的方式之一，常见的有柱状图、折线图、饼图等等，我们之前也都一一实现过。如果我让你总结一下图表的实现方法，你能说出来吗？总结不出来也没关系，这节课，我们就一起梳理一下实际项目中常用的制图方法。
" /><meta name="keywords" content="技术文档, docs, 极客时间" />






<meta name="generator" content="Hugo 0.140.2 with theme even" />


<link rel="canonical" href="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/37__%E5%AE%9E%E6%88%98%E4%B8%80%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%9B%BE%E8%A1%A8%E5%BA%93%E7%BB%98%E5%88%B6%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%9B%BE%E8%A1%A8/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/37__%E5%AE%9E%E6%88%98%E4%B8%80%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%9B%BE%E8%A1%A8%E5%BA%93%E7%BB%98%E5%88%B6%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%9B%BE%E8%A1%A8/">
  <meta property="og:site_name" content="Docs">
  <meta property="og:title" content="37__实战（一）：如何使用图表库绘制常用数据图表？">
  <meta property="og:description" content="你好，我是月影。
图表是我们在可视化中展示数据常用的方式之一，常见的有柱状图、折线图、饼图等等，我们之前也都一一实现过。如果我让你总结一下图表的实现方法，你能说出来吗？总结不出来也没关系，这节课，我们就一起梳理一下实际项目中常用的制图方法。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:tag" content="跟月影学可视化">

  <meta itemprop="name" content="37__实战（一）：如何使用图表库绘制常用数据图表？">
  <meta itemprop="description" content="你好，我是月影。
图表是我们在可视化中展示数据常用的方式之一，常见的有柱状图、折线图、饼图等等，我们之前也都一一实现过。如果我让你总结一下图表的实现方法，你能说出来吗？总结不出来也没关系，这节课，我们就一起梳理一下实际项目中常用的制图方法。">
  <meta itemprop="datePublished" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="5137">
  <meta itemprop="keywords" content="跟月影学可视化">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="37__实战（一）：如何使用图表库绘制常用数据图表？">
  <meta name="twitter:description" content="你好，我是月影。
图表是我们在可视化中展示数据常用的方式之一，常见的有柱状图、折线图、饼图等等，我们之前也都一一实现过。如果我让你总结一下图表的实现方法，你能说出来吗？总结不出来也没关系，这节课，我们就一起梳理一下实际项目中常用的制图方法。">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Docs</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Docs</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">37__实战（一）：如何使用图表库绘制常用数据图表？</h1>

      <div class="post-meta">
        <span class="post-time"> 10100-01-10 </span>
        <div class="post-category">
            <a href="/categories/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"> 极客时间 </a>
            </div>
          <span class="more-meta"> 约 5137 字 </span>
          <span class="more-meta"> 预计阅读 11 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#课前准备">课前准备</a></li>
        <li><a href="#qcharts-图表的基本用法">QCharts 图表的基本用法</a></li>
        <li><a href="#qcharts-绘制折线图面积图柱状图和饼图的方法">QCharts 绘制折线图、面积图、柱状图和饼图的方法</a></li>
        <li><a href="#qcharts-绘制雷达图仪表盘和玉玦图南丁格尔玫瑰图">QCharts 绘制雷达图、仪表盘和玉玦图、南丁格尔玫瑰图</a></li>
        <li><a href="#qcharts-绘制图表组合">QCharts 绘制图表组合</a></li>
        <li><a href="#要点总结">要点总结</a></li>
        <li><a href="#小试牛刀">小试牛刀</a></li>
        <li><a href="#源码">源码</a></li>
        <li><a href="#推荐阅读">推荐阅读</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>你好，我是月影。</p>
<p>图表是我们在可视化中展示数据常用的方式之一，常见的有柱状图、折线图、饼图等等，我们之前也都一一实现过。如果我让你总结一下图表的实现方法，你能说出来吗？总结不出来也没关系，这节课，我们就一起梳理一下实际项目中常用的制图方法。</p>
<p>实现图表有两种方式，一是使用现成的图表库，二是使用数据驱动框架，前者胜在简单易用，后者则更加灵活。所以，我们会用两节课的时间分别来讲，使用图表库和使用数据驱动框架的制图思路。</p>
<p>因为使用图表库更加简单，所以这一节课我们先来讲怎么使用它实现图表。另外，这节课的实践性比较强，我建议你跟着我的讲解一块儿动手去写，这样能更快地理解课程的内容。</p>
<h2 id="课前准备">课前准备</h2>
<p>说了这么多，我们今天到底会用哪些图表库呢？我们主要会使用我们比较熟悉的 SpriteJS 和 QCharts 来绘制图表。其他的图表库，例如更常用的ECharts，它在图表实现上的原理和用法和我们今天讲的基本相同，所以学完了今天的内容，你完全可以根据它的教程文档去自学。</p>
<p>好了，确定了要使用的工具之后，我们就要配置和加载 SpriteJS 和 QCharts。具体怎么做呢？</p>
<p>最简单的方式是，我们直接通过 CDN，用 script 标签来加载 SpriteJS 和 QCharts 打包好的文件。</p>
<script src="https://unpkg.com/spritejs/dist/spritejs.min.js"></script>  
<script src="https://unpkg.com/@qcharts/core@1.0.25/dist/index.js"></script>
<p>如果是完整的工程项目的话，你也可以使用 webpack 来打包和加载模块。这里有一个Quick Start，你可以 fork 这个项目，按照其中的配置项来设置。当加载完成之后，我们就可以开始绘制基础的图表了。</p>
<h2 id="qcharts-图表的基本用法">QCharts 图表的基本用法</h2>
<p>QCharts 图表由图表（Chart）对象及其子元素构成。其中图表对象的子元素包含图形（Visual）和其他插件（Plugin)。图形是必选元素，其他的插件都是可选元素。</p>
<p>图表在构建的时候，需要传入一个 DOM 元素，这个元素可以是页面上任意一个块级元素，QCharts 用这个元素作为容器来创建 Canvas 画布，并其还会根据容器的大小来设置 Canvas 画布的大小。默认情况下，图表会根据画布大小来自动适配。</p>
<p>接下来，我们看一下具体的操作。首先，我们创建一个图表对象，设置它的容器设置成一个 id 为 app 的元素。</p>
<p>const { Chart, Line } = qcharts;<br>
const chart = new Chart({<br>
container: &lsquo;#app&rsquo;<br>
});</p>
<p>创建了这个容器之后，我们就可以为它绑定数据，假设我们绑定一份销售数据。</p>
<p>const data = [<br>
{ date: &lsquo;05-01&rsquo;, category: &lsquo;图例一&rsquo;, sales: 15.2 },<br>
{ date: &lsquo;05-02&rsquo;, category: &lsquo;图例一&rsquo;, sales: 39.2 },<br>
{ date: &lsquo;05-03&rsquo;, category: &lsquo;图例一&rsquo;, sales: 31.2 },<br>
{ date: &lsquo;05-04&rsquo;, category: &lsquo;图例一&rsquo;, sales: 65.2 },<br>
{ date: &lsquo;05-05&rsquo;, category: &lsquo;图例一&rsquo;, sales: 55.2 },<br>
{ date: &lsquo;05-06&rsquo;, category: &lsquo;图例一&rsquo;, sales: 75.2 },<br>
{ date: &lsquo;05-07&rsquo;, category: &lsquo;图例一&rsquo;, sales: 95.2 },<br>
{ date: &lsquo;05-08&rsquo;, category: &lsquo;图例一&rsquo;, sales: 100 }<br>
];</p>
<p>chart.source(data, {<br>
row: &lsquo;category&rsquo;,<br>
value: &lsquo;sales&rsquo;,<br>
text: &lsquo;date&rsquo;<br>
});</p>
<p>如上面代码所示，我们将数据内容与图表对象通过 chart.source 方法绑定起来。绑定数据的时候，我们可以指定数据的行（列）、数值和文本，这些设置会被图形（Visual）和其他插件使用。这里，我们将行设为 category 这个字段，数值设为 sales 字段，文本设为 data 字段。</p>
<p>设置之后，图表并没有马上显示出来。这是因为，我们还没有给图表指定图形。QCharts 支持多种图形对象，比如 Line、Area、Bar 等等。假设我们选择了 Line 对象，那我们只需要创建它，然后将它添加到 chart 对象的子元素中就可以了。</p>
<p>const line = new Line();<br>
chart.append([line]);</p>
<p>这样，我们就让图形显示出来了，效果如下：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/274d1e77df90da8439bdc4812463d65e.png" alt=""></p>
<p>了解了 QCharts 图表的基本用法之后，我们一起进入实践环节吧。</p>
<h2 id="qcharts-绘制折线图面积图柱状图和饼图的方法">QCharts 绘制折线图、面积图、柱状图和饼图的方法</h2>
<p>我们先来讲讲折线图、面积图、柱状图和饼图的实现方法，因为之前已经实现过很多次了，所以理解起来比较容易。</p>
<p>首先是折线图，它是可视化中最常用的图表之一。刚才我们用 Line 图形绘制了一条折线，但它还不是完整的折线图。完整的折线图，除了有图形以外，还要有表示数据的坐标轴、提示信息和图例，这些都需要在 QCharts 中由插件来完成。</p>
<p>接下来，我们就继续给前面的代码添加元素。首先，我们给它增加两个坐标轴，分别是底部和左侧的。</p>
<p>我们通过 Axis 类来创建 axis 对象，默认的坐标轴是在底部不用修改，再通过.style 改变它的样式属性，比如我们将&quot;grid&quot;设置为 false，这样画布上不会显示纵向的网格线。</p>
<p>const axisBottom = new Axis().style(&ldquo;grid&rdquo;, false);</p>
<p>然后，我们同样创建一个 axis 对象，通过设置 orient: “left”让它朝左，这样就成功创建了左侧的坐标轴。同样，我们也要把它样式中的&quot;axis&quot;属性设置为 false，这样画布上就不会显示坐标轴的实线了。</p>
<p>const axisLeft = new Axis({ orient: &ldquo;left&rdquo; })<br>
.style(&ldquo;axis&rdquo;, false);</p>
<p>最后，我们将两个坐标轴添加到 chart 对象的子元素中去，就可以将坐标轴显示出来。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/d77d7e17938688fd0d6926715c1181f5.png" alt=""></p>
<p>添加完坐标轴之后，我们再添加图例（Legend）和提示（Tooltip）。最简单的方式，是我们直接创建两个对象，然后将它们添加到 charts 对象的子元素中。</p>
<p>const legend = new Legend();<br>
const tooltip = new Tooltip();<br>
chart.append([line, axisBottom, axisLeft, legend, tooltip]);</p>
<p>添加了图例和提示信息后的图表如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/e61f104fbb23b3a34c0b3fe3a006a8c5.png" alt=""></p>
<p><strong>接下来，我们再来说说怎么用 QCharts 绘制面积图和柱状图。</strong></p>
<p>学会了折线图的绘制方法，我们就可以用相同的思路非常简单地绘制其他图形了，比如说，我们可以简单将 Line 对象换成 Area 或 Bar 对象，这样就可以用同样的数据绘制出面积图或柱状图。这是为什么呢？</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/06abefc0d4d7962596cbcee0ec5573d0.png" alt=""></p>
<p>将 Line 改成 Area 绘制出面积图</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/633e44144c2ef189836502a48d52662c.png" alt=""></p>
<p>将 Line 改成 Area 绘制出柱状图</p>
<p>因为像折线图、面积图、柱状图这些表现形式不同的图表，它们能够接受同样格式的数据，只是想要侧重表达的信息不同而已。一般来说，折线图强调数据变化趋势，柱状图强调数据的量和差值，而面积图同时强调数据量和变化趋势。在实际项目中，我们要根据不同的需求选择不同的基本图形。</p>
<p>如果要强调整体和局部比例，我们还可以选择绘制饼图。与折线图、面积图、柱状图相比，饼图不用配置图例，因为图例会自动生成，而且饼图也不需要坐标轴，所以使用起来更加简单。</p>
<p>const data = [<br>
{ date: &lsquo;05-01&rsquo;, sales: 15.2 },<br>
{ date: &lsquo;05-02&rsquo;, sales: 39.2 },<br>
{ date: &lsquo;05-03&rsquo;, sales: 31.2 },<br>
{ date: &lsquo;05-04&rsquo;, sales: 65.2 },<br>
{ date: &lsquo;05-05&rsquo;, sales: 55.2 },<br>
{ date: &lsquo;05-06&rsquo;, sales: 75.2 },<br>
{ date: &lsquo;05-07&rsquo;, sales: 95.2 },<br>
{ date: &lsquo;05-08&rsquo;, sales: 100 }<br>
];</p>
<p>chart.source(data, {<br>
row: &lsquo;date&rsquo;,<br>
value: &lsquo;sales&rsquo;,<br>
text: &lsquo;date&rsquo;<br>
});</p>
<p>const pie = new Pie();<br>
const legend = new Legend();<br>
const tooltip = new Tooltip();<br>
chart.append([pie, legend, tooltip]);</p>
<p>上面的代码用同样的数据绘制了一个饼图。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/0581d5bd2260fe906f02876c51577b62.png" alt=""></p>
<h2 id="qcharts-绘制雷达图仪表盘和玉玦图南丁格尔玫瑰图">QCharts 绘制雷达图、仪表盘和玉玦图、南丁格尔玫瑰图</h2>
<p>讲完了这些常见的基础图表，我们再来看几个比较有趣的图表。</p>
<p>首先是雷达图，它一般用来绘制多组固定数量的数据，可以比较直观地显示出这组数据的特点。我们经常会在游戏中看见它的应用，比如，下面这张图表就显示了三国武将诸葛亮的各方面数据。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/3d28458648900a54fa766ee975476f1e.png" alt=""></p>
<p>雷达图的实现代码如下：</p>
<p>const data = [<br>
{ date: &lsquo;体力&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 100 },<br>
{ date: &lsquo;武力&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 69 },<br>
{ date: &lsquo;智力&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 100 },<br>
{ date: &lsquo;统帅&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 95 },<br>
{ date: &lsquo;魅力&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 95 },<br>
{ date: &lsquo;忠诚&rsquo;, category: &lsquo;诸葛亮&rsquo;, sales: 100 },<br>
];</p>
<p>chart.source(data, {<br>
row: &lsquo;category&rsquo;,<br>
value: &lsquo;sales&rsquo;,<br>
text: &lsquo;date&rsquo;<br>
});</p>
<p>const radar = new Radar();<br>
radar.style(&lsquo;section&rsquo;, (d) =&gt; ({ opacity: 0.3 }));</p>
<p>const legend = new Legend({ align: [&lsquo;center&rsquo;, &lsquo;bottom&rsquo;] });<br>
const tooltip = new Tooltip();<br>
chart.append([radar, legend, tooltip]);</p>
<p>除此之外，还有一些其他类型的图表，可以用来展示特殊的信息。比较典型的有仪表盘，它可以显示某个变量的进度。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/745933119cf547f87ecee5c88e03effa.png" alt=""></p>
<p>仪表盘实现代码比较简单，如下所示：</p>
<p>const gauge = new Gauge({<br>
min: 0,<br>
max: 100,<br>
percent:60,<br>
lineWidth: 20,<br>
tickStep: 10<br>
});</p>
<p>gauge.style(&rsquo;title&rsquo;, { fontSize: 36 });</p>
<p>chart.append(gauge);</p>
<p>如果我们要显示多个变量的进度，还可以使用玉玦图。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/4eaa40e29cd133b66c3977305933f01b.png" alt=""></p>
<p>对应的代码也非常简单，如下所示：</p>
<p>const data = [<br>
{<br>
type: &lsquo;政法干部&rsquo;,<br>
count: 6654<br>
},{<br>
type: &lsquo;平安志愿者&rsquo;,<br>
count: 5341<br>
},{<br>
type: &lsquo;人民调解员&rsquo;,<br>
count: 3546<br>
},{<br>
type: &lsquo;心理咨询师&rsquo;,<br>
count: 4321<br>
},{<br>
type: &lsquo;法律工作者&rsquo;,<br>
count: 3923<br>
},{<br>
type: &lsquo;网格员&rsquo;,<br>
count: 5345<br>
}<br>
].sort((a, b) =&gt; a.count - b.count);</p>
<p>chart.source(data, {<br>
row: &rsquo;type&rsquo;,<br>
text: &rsquo;type&rsquo;,<br>
value: &lsquo;count&rsquo;<br>
});</p>
<p>const radialBar = new RadialBar({<br>
min: 0,<br>
max: 10000,<br>
radius: 0.6,<br>
innerRadius: 0.1,<br>
lineWidth: 10<br>
});</p>
<p>radialBar.style(&lsquo;arc&rsquo;, { lineCap: &lsquo;round&rsquo; });</p>
<p>const legend = new Legend({<br>
orient: &lsquo;vertical&rsquo;,<br>
align: [&lsquo;right&rsquo;, &lsquo;center&rsquo;],<br>
});</p>
<p>chart.append([radialBar, legend, new Tooltip()]);</p>
<p>最后是南丁格尔玫瑰图，它可以显示多维度的信息，比如下图就显示了男女游客在公园四个区域内的分布情况。南丁格尔玫瑰图的绘制思路和代码，我们在第 35 节课已经说过，这里就不再多说了。如果你还不熟悉，可以再去回顾一下。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/ca606757d7990667764ed58ce672ce4d.png" alt=""></p>
<h2 id="qcharts-绘制图表组合">QCharts 绘制图表组合</h2>
<p>我们刚才讲的都是在图表上绘制单一变量，那要想在图表上聚合多元变量，比如在一张天气图表上同时展示降水量、气温，我们可以同时绘制多个图形来表示。</p>
<p>我们可以分两种情况来讨论，最简单的情况是用相同的图形来绘制不同的变量。这个时候，我们可以直接通过不同 category 来绘制多个图形。比如，下面的数据就是用两组 category 分别绘制了两条折线。</p>
<p>const data = [<br>
{ date: &ldquo;1 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 15.2 },<br>
{ date: &ldquo;2 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 19.2 },<br>
{ date: &ldquo;3 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 11.2 },<br>
{ date: &ldquo;4 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 45.2 },<br>
{ date: &ldquo;5 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 55.2 },<br>
{ date: &ldquo;6 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 75.2 },<br>
{ date: &ldquo;7 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 95.2 },<br>
{ date: &ldquo;8 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 135.2 },<br>
{ date: &ldquo;9 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 162.2 },<br>
{ date: &ldquo;10 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 32.2 },<br>
{ date: &ldquo;11 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 32.2 },<br>
{ date: &ldquo;12 月&rdquo;, catgory: &ldquo;降水量&rdquo;, val: 15.2 },</p>
<p>{ date: &ldquo;1 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 2.2 },<br>
{ date: &ldquo;2 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 3.2 },<br>
{ date: &ldquo;3 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 5.2 },<br>
{ date: &ldquo;4 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 6.2 },<br>
{ date: &ldquo;5 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 8.2 },<br>
{ date: &ldquo;6 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 15.2 },<br>
{ date: &ldquo;7 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 25.2 },<br>
{ date: &ldquo;8 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 23.2 },<br>
{ date: &ldquo;9 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 24.2 },<br>
{ date: &ldquo;10 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 16.2 },<br>
{ date: &ldquo;11 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 12.2 },<br>
{ date: &ldquo;12 月&rdquo;, catgory: &ldquo;气温&rdquo;, val: 6.6 },<br>
];</p>
<p>chart.source(data, {<br>
row: &ldquo;catgory&rdquo;,<br>
value: &ldquo;val&rdquo;,<br>
text: &ldquo;date&rdquo;,<br>
});</p>
<p>const line = new Line({ axisGap: true });<br>
&hellip;</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/89a3481390bf5481a40cf44f00056f9c.png" alt=""></p>
<p>如果我们想用不同类型的图形来展示多个变量，在 QCharts 中，我们只需要创建多个不同的图形对象，然后把它们都添加到 chart 对象的子元素中去就可以了。</p>
<p>const ds = chart.dataset;</p>
<p>const d1 = ds.selectRows(&ldquo;降水量&rdquo;);<br>
const line = new Line({ axisGap: true })<br>
.source(d1)<br>
.style(&ldquo;point&rdquo;, { strokeColor: &ldquo;#fff&rdquo; });</p>
<p>const d2 = ds.selectRows(&ldquo;气温&rdquo;);<br>
const bar = new Bar().source(d2);<br>
bar.style(&ldquo;pillar&rdquo;, { fillColor: &ldquo;#6CD3FF&rdquo; });</p>
<p>如上面代码所示，我们先可以通过 chart.dataset 拿到通过.source 绑定给 chart 对象的数据集，然后，通过 selectRows 分别将降水量和气温数据过滤出来。接着，我们分别创建 Line 和 Bar 两个图形对象，再将降水量和气温数据分别绑定给它们。最后，我们将这两个对象同时添加到 chart 子元素列表里，就可以将两个不同类型的图形显示出来了，具体的效果如下：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/6323b8f794c942d5b241b4b2f529435c.png" alt=""></p>
<h2 id="要点总结">要点总结</h2>
<p>这节课，我们主要学习了 QCharts 图表库的使用。</p>
<p>QCharts 是基于 SpriteJS 的简单可视化图表库，我们通过它可以绘制各种类型的图表。一般来说，我们是先创建图表对象，然后绑定数据，接着添加图形对象以及其他的插件，包括图例和提示。通过将图形和插件以子元素的形式添加到图表对象上，就能把图表内容最终显示出来了。</p>
<p>我们可以很方便地根据数据特点和业务需要，用数据绘制折线图、面积图、柱状图、饼图、雷达图等图表，还可以绘制特殊的仪表盘和玉玦图。另外，如果要显示多维数据，我们也可以用稍微复杂一些的南丁格尔玫瑰图。</p>
<p>最后，我们还可以把多维度变量聚合在一个图表中来显示不同的图形组合。具体操作是，我们先筛选数据，然后创建不同类型的图形对象，最后将它们都添加到图表对象的子元素中。</p>
<p>总的来说，我们今天讲的其实都是 QCharts 图表库，最基础、最常用的方法。QCharts 还提供了众多其他类型的图表，以及灵活操作图表样式的 API。如果你有兴趣继续钻研，可以通过我课后给出的参考链接进一步学习。</p>
<h2 id="小试牛刀">小试牛刀</h2>
<p>你学会了使用不同图表来表达不同数据了吗？你可以试着使用 GitHub 仓库里的北京市天气数据和空气质量数据，实现一个温度、湿度、风速、空气质量的聚合图表吗？如果用来展示温度、湿度、风速和空气质量的图形都不相同就更好了。</p>
<p>这些常用的制图方法你都学会了吗？下节课，我们会接着来学，怎么使用数据驱动框架来表达不同数据，挑战才刚刚开始呢，我们下节课再见！</p>
<h2 id="源码">源码</h2>
<p>课程代码详见GitHub 仓库</p>
<h2 id="推荐阅读">推荐阅读</h2>
<p>QCharts 官网</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content"></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        10100-01-10
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/">跟月影学可视化</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/mysql%E5%AE%9E%E6%88%9845%E8%AE%B2/37__%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%86%85%E9%83%A8%E4%B8%B4%E6%97%B6%E8%A1%A8/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">37__什么时候会使用内部临时表？</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E/37__%E5%AE%9E%E6%88%98%E4%BA%8C%E4%B8%8B%E9%87%8D%E6%9E%84id%E7%94%9F%E6%88%90%E5%99%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%90%84%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81/">
            <span class="next-text nav-default">37__实战二（下）：重构ID生成器项目中各函数的异常处理代码</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2024 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FVZ07KBD4X"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FVZ07KBD4X');
        }
      </script>






</body>
</html>
