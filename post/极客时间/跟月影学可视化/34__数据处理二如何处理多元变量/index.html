<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>34__数据处理（二）：如何处理多元变量？ - Docs</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="你好，我是月影。
数据处理是一门很深的学问，想要学好它，我们不仅需要掌握很复杂的理论，还需要不断地积累经验。不过，其中也有一些基础的数据处理技巧，掌握它们，我们就能更好地入门可视化了。
" /><meta name="keywords" content="技术文档, docs, 极客时间" />






<meta name="generator" content="Hugo 0.140.2 with theme even" />


<link rel="canonical" href="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/34__%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%BA%8C%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%A4%9A%E5%85%83%E5%8F%98%E9%87%8F/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/34__%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%BA%8C%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%A4%9A%E5%85%83%E5%8F%98%E9%87%8F/">
  <meta property="og:site_name" content="Docs">
  <meta property="og:title" content="34__数据处理（二）：如何处理多元变量？">
  <meta property="og:description" content="你好，我是月影。
数据处理是一门很深的学问，想要学好它，我们不仅需要掌握很复杂的理论，还需要不断地积累经验。不过，其中也有一些基础的数据处理技巧，掌握它们，我们就能更好地入门可视化了。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:tag" content="跟月影学可视化">

  <meta itemprop="name" content="34__数据处理（二）：如何处理多元变量？">
  <meta itemprop="description" content="你好，我是月影。
数据处理是一门很深的学问，想要学好它，我们不仅需要掌握很复杂的理论，还需要不断地积累经验。不过，其中也有一些基础的数据处理技巧，掌握它们，我们就能更好地入门可视化了。">
  <meta itemprop="datePublished" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="4243">
  <meta itemprop="keywords" content="跟月影学可视化">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="34__数据处理（二）：如何处理多元变量？">
  <meta name="twitter:description" content="你好，我是月影。
数据处理是一门很深的学问，想要学好它，我们不仅需要掌握很复杂的理论，还需要不断地积累经验。不过，其中也有一些基础的数据处理技巧，掌握它们，我们就能更好地入门可视化了。">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Docs</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Docs</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">34__数据处理（二）：如何处理多元变量？</h1>

      <div class="post-meta">
        <span class="post-time"> 10100-01-10 </span>
        <div class="post-category">
            <a href="/categories/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"> 极客时间 </a>
            </div>
          <span class="more-meta"> 约 4243 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#从数据到图表展现">从数据到图表展现</a></li>
        <li><a href="#处理多元变量">处理多元变量</a>
          <ul>
            <li><a href="#在一张图表上绘制多元变量">在一张图表上绘制多元变量</a></li>
            <li><a href="#用散点图分析变量的相关性">用散点图分析变量的相关性</a></li>
            <li><a href="#散点图的扩展">散点图的扩展</a></li>
            <li><a href="#其他图表形式">其他图表形式</a></li>
          </ul>
        </li>
        <li><a href="#要点总结">要点总结</a></li>
        <li><a href="#小试牛刀">小试牛刀</a></li>
        <li><a href="#源码">源码</a></li>
        <li><a href="#推荐阅读">推荐阅读</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>你好，我是月影。</p>
<p>数据处理是一门很深的学问，想要学好它，我们不仅需要掌握很复杂的理论，还需要不断地积累经验。不过，其中也有一些基础的数据处理技巧，掌握它们，我们就能更好地入门可视化了。</p>
<p>比如我们上节课重点讲解的数据分类，就是其中一种非常基础的数据处理技巧，也是数据处理的第一步。这一节课，我会以处理 2014 年北京市的天气历史数据为例，来和你进一步讨论数据处理的基础技巧，包括从数据到图表的展现以及处理多元变量的方法。</p>
<h2 id="从数据到图表展现">从数据到图表展现</h2>
<p>一般来说，我们拿到的原始数据通常可以组织成表格的形式，表格中会有很多列，每一列都代表一个变量。比如，我们拿到的这份天气历史数据，它看起来可能是下面这样的：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/502938434df31f441d63438a2ec1dc64.png" alt=""></p>
<p>这里有许多变量，比如时间、最高气温、平均气温、最低气温、最高湿度、平均湿度、最低湿度、露点等等。一般的情况下，我们会将其中我们最关心的一个变量平均气温，用一个图表展现出来。具体怎么做呢？我们可以来动手操作一下。</p>
<p>这份数据是 csv 格式的，是一张表，我们先用 D3.js 将数据读取出来，然后结构化成 JSON 对象。</p>
<p>const rawData = await (await fetch(&lsquo;beijing_2014.csv&rsquo;)).text();<br>
const data = d3.csvParse(rawData);<br>
const dataset = data.filter(d =&gt; new Date(d.Date).getMonth() &lt; 3)<br>
.map(d =&gt; {return {temperature: Number(d[&lsquo;Temperature(Celsius)(avg)&rsquo;]), date: d.Date, category: &lsquo;平均气温&rsquo;}});<br>
console.log(dataset);</p>
<p>如上面代码所示，我们通过 fetch 读取 csv 的数据。CSV 文件格式是用逗号和回车分隔的文本，所以我们用.text() 读取内容。然后我们使用 d3 的 csvParse 方法，将数据解析成 JSON 数组。最后，我们再通过数组的 filter 和 map，将我们感兴趣的数据取出来。这里，我们截取了 1 月到 3 月的平均气温数据。</p>
<p>取到了想要的数据，接下来我们就可以将它展示出来了，这一步我们可以使用数据驱动框架。在预习篇我们讲过，数据驱动框架是一种特殊的库，它们更专注于处理数据的组织形式，将数据呈现交给更底层的图形系统（DOM、SVG、Canvas）或通用图形库（SpriteJS、ThreeJS）去完成。</p>
<p>但是，为了方便你理解，这里我就不使用数据驱动框架了，而是直接采用一个图表库QCharts，它是一个基于 SpriteJS 设计的图表库。与数据驱动框架相比，图表库虽然减少了灵活性，但是使用上更加方便，通过一些简单的配置，我们就可以完成图表的渲染。</p>
<p>用来展示平均气温最常见的图表就是折线图，展示折线图的过程可以简单分为 4 步：第一步是创建图表（Chart）并传入数据；第二步是创建图形（Visual)，这里我们创建的是折线图，所以使用 Line 对象；第三步是创建横、纵两个坐标轴（Axis）、提示（ToolTip）和一个图例（Legend）；最后一步是将图形、坐标轴、提示和图例都添加到图表上。具体的代码如下：</p>
<p>const { Chart, Line, Legend, Tooltip, Axis } = qcharts;<br>
const chart = new Chart({<br>
container: &lsquo;#app&rsquo;<br>
});<br>
let clientRect={bottom:50};<br>
chart.source(dataset, {<br>
row: &lsquo;category&rsquo;,<br>
value: &rsquo;temperature&rsquo;,<br>
text: &lsquo;date&rsquo;<br>
});</p>
<p>const line = new Line({clientRect});<br>
const axisBottom = new Axis({clientRect}).style(&lsquo;grid&rsquo;, false);<br>
axisBottom.attr(&lsquo;formatter&rsquo;, d =&gt; &lsquo;&rsquo;);<br>
const toolTip = new Tooltip({<br>
title: arr =&gt; {<br>
return arr.category<br>
}<br>
});<br>
const legend = new Legend();<br>
const axisLeft = new Axis({ orient: &rsquo;left&rsquo;,clientRect }).style(&lsquo;axis&rsquo;, false).style(&lsquo;scale&rsquo;, false);</p>
<p>chart.append([line, axisBottom, axisLeft, toolTip, legend]);</p>
<p>这样，我们就将图表渲染到画布上了。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/e8ed50570aeb69761213c025e0ab0da5.png" alt=""></p>
<h2 id="处理多元变量">处理多元变量</h2>
<p>刚才我们已经成功将平均气温这个变量用折线图展示出来了，但在很多数据可视化场景里，我们不只会关心一个变量，还会关注多个变量，比如，我们需要同时关注温度和湿度数据。那怎么才能把多个变量绘制在同一张图表上呢？换句话说，同一张图表怎么展示多元变量呢？</p>
<h3 id="在一张图表上绘制多元变量">在一张图表上绘制多元变量</h3>
<p>最简单的方式是直接在图表上同时绘制多个变量，每个变量对应一个图形，这样一张图表上就同时显示多个图形。</p>
<p>我们直接以刚才的代码为例，现在，我们修改例子中的代码，直接添加平均湿度数据，代码如下：</p>
<p>const rawData = await (await fetch(&lsquo;beijing_2014.csv&rsquo;)).text();<br>
const data = d3.csvParse(rawData).filter(d =&gt; new Date(d.Date).getMonth() &lt; 3);<br>
const dataset1 = data<br>
.map(d =&gt; {<br>
return {<br>
value: Number(d[&lsquo;Temperature(Celsius)(avg)&rsquo;]),<br>
date: d.Date,<br>
category: &lsquo;平均气温&rsquo;}<br>
});<br>
const dataset2 = data<br>
.map(d =&gt; {<br>
return {<br>
value: Number(d[&lsquo;Humidity(%)(avg)&rsquo;]),<br>
date: d.Date,<br>
category: &lsquo;平均湿度&rsquo;}<br>
});</p>
<p>然后，我们修改图表的数据，将温度（dataset1）和湿度（dataset2）数据都传入图表，代码如下：</p>
<p>chart.source([&hellip;dataset1, &hellip;dataset2], {<br>
row: &lsquo;category&rsquo;,<br>
value: &lsquo;value&rsquo;,<br>
text: &lsquo;date&rsquo;<br>
});</p>
<p>这样，我们就得到了同时显示温度和湿度数据的折线图。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/6a2889f5cbe24b8cbe176234987f7bc2.png" alt=""></p>
<h3 id="用散点图分析变量的相关性">用散点图分析变量的相关性</h3>
<p>不过，你应该也发现了，把温度和深度同时绘制到一张折线图之后，我们很难直观地看出温度与湿度的相关性。所以，如果我们希望了解 2014 年全年，北京市温度和湿度之间的关联性，我们还得用另外的方式。那都有哪些方式呢？</p>
<p>一般来说，要分析两个变量的相关性，我们可以使用散点图，散点图有两个坐标轴，其中一个坐标轴表示变量 A，另一个坐标轴表示变量 B。这里，我们将平均温度、相对湿度数据获取出来，然后用 QCharts 的散点图（Scatter）来渲染。具体的代码和示意图如下：</p>
<p>const rawData = await (await fetch(&lsquo;beijing_2014.csv&rsquo;)).text();<br>
const data = d3.csvParse(rawData);<br>
console.log(data);<br>
const dataset = data<br>
.map(d =&gt; {<br>
return {<br>
temperature: Number(d[&lsquo;Temperature(Celsius)(avg)&rsquo;]),<br>
humdity: Number(d[&lsquo;Humidity(%)(avg)&rsquo;]),<br>
category: &lsquo;平均气温与湿度&rsquo;}<br>
});</p>
<p>const { Chart, Scatter, Legend, Tooltip, Axis } = qcharts;<br>
const chart = new Chart({<br>
container: &lsquo;#app&rsquo;<br>
});<br>
let clientRect={bottom:50};<br>
chart.source(dataset, {<br>
row: &lsquo;category&rsquo;,<br>
value: &rsquo;temperature&rsquo;,<br>
text: &lsquo;humdity&rsquo;<br>
});</p>
<p>const scatter = new Scatter({<br>
clientRect,<br>
showGuideLine: true,<br>
});<br>
const toolTip = new Tooltip({<br>
title: (data) =&gt; &lsquo;温度与湿度：&rsquo;,<br>
formatter: (data) =&gt; {<br>
return <code>温度：${data.temperature}C  湿度：${data.humdity}% </code><br>
}<br>
});<br>
const legend = new Legend();<br>
const axisLeft = new Axis({ orient: &rsquo;left&rsquo;,clientRect }).style(&lsquo;axis&rsquo;, false).style(&lsquo;scale&rsquo;, false);<br>
const axisBottom = new Axis();</p>
<p>chart.append([scatter, axisBottom, axisLeft, toolTip, legend]);</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/f99759137824f611f83106de28de7326.png" alt=""></p>
<p>从这个图表我们可以看出，平均温度和相对湿度并没有相关性，所以点的空间分布比较随机。事实上也是如此，气温和绝对湿度有关，但相对湿度因为已经考虑过了温度因素，所以就和气温没有相关性了。</p>
<p>那你可能会有疑问，相关的图形长什么样呢？我们可以用另外两个变量，比如露点和平均温度，来试试看能不能画出相关的散点图。</p>
<p>我们先来说说什么是露点。在空气中水汽含量不变，并且气压一定的情况下，空气能够冷却达到饱和时的温度就叫做露点温度，简称露点，它的单位与气温相同。</p>
<p>从定义里我们知道，露点和温度与湿度都有相关性。接下来，我们来看一下露点和温度的相关性在散点图中是怎么体现的。很简单，我们只要修改一下上面代码里的数据，把平均湿度换成平均露点温度就行了。</p>
<p>const dataset = data<br>
.map(d =&gt; {<br>
return {<br>
temperature: Number(d[&lsquo;Temperature(Celsius)(avg)&rsquo;]),<br>
tdp: Number(d[&lsquo;Dew Point(Celsius)(avg)&rsquo;]),<br>
category: &lsquo;平均气温与露点&rsquo;}<br>
});</p>
<p>这样，我们最终呈现出来的散点图具有典型的数据正相关性，也就是说图形的点更集中在对角线附近的区域。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/320ea833b66e5337c7cbd7d6038fcd47.png" alt=""></p>
<p>我们还可以把湿度数据也加上。</p>
<p>const dataset = data<br>
.map(d =&gt; {<br>
return {<br>
value: Number(d[&lsquo;Temperature(Celsius)(avg)&rsquo;]),<br>
tdp: Number(d[&lsquo;Dew Point(Celsius)(avg)&rsquo;]),<br>
category: &lsquo;平均气温与露点&rsquo;}<br>
});<br>
const dataset2 = data<br>
.map(d =&gt; {<br>
return {<br>
value: Number(d[&lsquo;Humidity(%)(avg)&rsquo;]),<br>
tdp: Number(d[&lsquo;Dew Point(Celsius)(avg)&rsquo;]),<br>
category: &lsquo;平均湿度与露点&rsquo;}<br>
});</p>
<p>&hellip;<br>
chart.source([&hellip;dataset, &hellip;dataset2], {<br>
row: &lsquo;category&rsquo;,<br>
value: &lsquo;value&rsquo;,<br>
text: &rsquo;tdp&rsquo;<br>
});</p>
<p>我们发现，平均湿度和露点也是成正相关的，不过露点与温度的相关性更强，因为散点更集中一些。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/643d6c79722d2aee6571ff203379e74f.png" alt=""></p>
<p>为了再强化理解，我们还可以看一组强相关的数据，比如平均温度和最低温度，你会发现，图上的散点基本上就在对角线上。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/819e96c2998462e3072dc0e24ee191b7.png" alt=""></p>
<p>总的来说，两个数据的散点越集中在对角线，说明这两个数据的相关性越强，当然这么说还不够严谨只是方便我们记忆而已。这里，我找到了一张散点图和相关性之间关系的总结图，你可以多了解一下。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/6e71968800db1664807ae2a152d5cb94.png" alt=""></p>
<h3 id="散点图的扩展">散点图的扩展</h3>
<p>通过前面的例子，我们可以看到，用散点图可以分析出数据的二元变量之间的相关性，这对数据可视化场景的信息处理非常有用。不过，散点图也有明显的局限性，那就是它的维度只有二维，所以它一般只能处理二元变量，超过二维的多元变量的相关性，它处理起来就有些力不从心了。</p>
<p>不过，我们还不想放弃散点图在相关性上的优异表现。所以在处理高维度数据时，我们可以对散点图进行扩展，比如引入颜色、透明度、大小等信息来表示额外的数据维度，这样就可以处理多维数据了。</p>
<p>举个例子，我在下面给出了一张根据加州房产数据集制作的散点图。其中，点的大小代表街区人口数量、透明度代表人口密度，而颜色代表房价高低，并且加上经纬度代表点的位置。这个散点图一共表示了五维的变量（经度、纬度、人口总数、人口密度、房价高低），将它们都呈现在了一张图上，这在一定程度上表达了这些变量的相关信息。</p>
<p><a href="https://zhuanlan.zhihu.com/p/141118125"><img src="./cd8deb321a356c74e05926ee46c55f37.png.md" alt=""></a></p>
<p>图片来源：知乎</p>
<p>这里，我带你做个简单的分析。从这张图上，我们很容易就可以得出两个结论，第一个是，房价比较高的区域集中于两个中心，并且都靠近海湾。第二个是房价高的地方对应的人口密集度也高。</p>
<p>这就是用散点图处理多维数据的方法了。</p>
<h3 id="其他图表形式">其他图表形式</h3>
<p>事实上，处理多维信息，我们还可以用其他的图表展现形式，比如用晴雨表来表示数据变化的趋势就比较合适。北大可视化实验室在疫情期间就制作了一张疫情数据晴雨表，你能明显看出每个省份每天的疫情变化。如下所示：</p>
<p><a href="https://mp.weixin.qq.com/s/Nq0-p6z1GO869XaS0zliiw"><img src="./acc284ecad997f7dd005d1d398bfc939.png.md" alt=""></a></p>
<p>图片来源：mp.weixin.qq.com</p>
<p>再比如，还有平行坐标图。平行坐标图也有横纵两个坐标轴，并且把要进行对比的五个不同参数都放在了水平方向的坐标上。在下面的示意图中，绘制了所有 4 缸、6 缸或 8 缸汽车在五个不同参数（变量）上的对比。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/94682abde230716546d86d0eed647abf.png" alt=""></p>
<p>左为平行坐标图，右为热力图</p>
<p>此外，我们还可以用热力图、三维直方图、三维气泡图等等其他的可视化形式来展现多维度的信息。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/3da9a6fac26b403ba160155e1a54e5b6.png" alt=""></p>
<p>左为三维直方图，右为三维气泡图</p>
<p>总之，这些数据展现形式的基本实现原理，我们都在前面的视觉篇中讲过了。在掌握了视觉基础知识之后，我们就可以用自己想要的呈现形式，自由发挥，设计出各种直观的、形式有趣的图表了。</p>
<h2 id="要点总结">要点总结</h2>
<p>这一节课，我们主要讨论数据到图表的展现以及如何处理多元变量。</p>
<p>在数据到图表的展现中，我们首先用 d3.js 把原始数据从 csv 中读取出来，然后选择我们需要的数据，用简单的图表库，比如，使用 QCharts 图表库进行渲染。渲染过程可以分为 4 步，分别是：创建图表对象 Chart 并传入数据，创建图形 Visual，创建坐标轴、提示和图例，把图形、坐标轴、提示和图例添加到图表对象中完成渲染。</p>
<p>在处理多元变量的时候，我们可以用散点图表示变量的相关性。对于超过二维的数据，我们可以扩展散点图，调整颜色、大小、透明度等等手段表达额外的信息。除了散点图之外，我们还可以用晴雨表、平行坐标图、热力图、三维直方图、气泡图等等图表，来表示多维数据的相关性。</p>
<p>到这里，我们用两节课的时间讲完了可视化的数据处理的基础部分。这部分内容如果再深入下去，就触达了数据分析的领域了，这也是一个和可视化密切相关的学科。那我也说过，可视化的重点，一是数据、二是视觉，视觉往深入研究，就进入渲染引擎、游戏等等领域，数据往深入研究，就进入数据分析的领域。所以，在可视化的入门或者说是基础阶段，掌握我现在讲的这些基础知识就够了。当然，如果你想深入研究也是好事，你可以参考我在课后给出的文章好好阅读一下。</p>
<h2 id="小试牛刀">小试牛刀</h2>
<ol>
<li>我在 GitHub 代码仓库里放了两份数据，一份是我们今天讲课用到的，另一份是2013 到 2018 年的全国各地空气质量数据。你能把 2014 年北京每日 PM2.5 的数据用折线图表示出来吗？你还能结合这两份数据，用散点图分析平均气温和 PM2.5 指数的相关性吗？</li>
<li>你可以模仿我北大可视化实验室的疫情晴雨表，实现一个 2018 年全国各城市空气质量晴雨表吗？</li>
</ol>
<p>欢迎在留言区和我讨论，分享你的答案和思考，也欢迎你把这节课分享给你的朋友，我们下节课见！</p>
<h2 id="源码">源码</h2>
<p>课程中完整示例代码见 GitHub 仓库</p>
<h2 id="推荐阅读">推荐阅读</h2>
<p>[1] 从 1 维到 6 维 - 多维数据可视化策略</p>
<p>[2] QCharts</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content"></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        10100-01-10
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/">跟月影学可视化</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BE%8E/34__%E5%AE%9E%E6%88%98%E4%B8%80%E4%B8%8A%E9%80%9A%E8%BF%87%E4%B8%80%E6%AE%B5id%E7%94%9F%E6%88%90%E5%99%A8%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0%E5%A6%82%E4%BD%95%E5%8F%91%E7%8E%B0%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E9%97%AE%E9%A2%98/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">34__实战一（上）：通过一段ID生成器代码，学习如何发现代码质量问题</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/openresty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/34__%E7%89%B9%E5%88%AB%E6%94%BE%E9%80%81openresty%E7%BC%96%E7%A0%81%E6%8C%87%E5%8D%97/">
            <span class="next-text nav-default">34__特别放送：OpenResty编码指南</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2024 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FVZ07KBD4X"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FVZ07KBD4X');
        }
      </script>






</body>
</html>
