<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>03__揪出隐藏在背后的那些子项目 - Docs</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="你好，我是温铭。
我们先来揭晓上一节最后留下的思考题，如何把 Lua 代码从 nginx.conf 里面抽取出来，保持代码的可读性和可维护性呢？
操作其实很简单。
我们先在 geektime 的工作目录下，创建一个名为 lua 的目录，专门用来存放代码：
" /><meta name="keywords" content="技术文档, docs, 极客时间" />






<meta name="generator" content="Hugo 0.140.2 with theme even" />


<link rel="canonical" href="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/openresty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/03__%E6%8F%AA%E5%87%BA%E9%9A%90%E8%97%8F%E5%9C%A8%E8%83%8C%E5%90%8E%E7%9A%84%E9%82%A3%E4%BA%9B%E5%AD%90%E9%A1%B9%E7%9B%AE/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:url" content="https://politcloud.org/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/openresty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/03__%E6%8F%AA%E5%87%BA%E9%9A%90%E8%97%8F%E5%9C%A8%E8%83%8C%E5%90%8E%E7%9A%84%E9%82%A3%E4%BA%9B%E5%AD%90%E9%A1%B9%E7%9B%AE/">
  <meta property="og:site_name" content="Docs">
  <meta property="og:title" content="03__揪出隐藏在背后的那些子项目">
  <meta property="og:description" content="你好，我是温铭。
我们先来揭晓上一节最后留下的思考题，如何把 Lua 代码从 nginx.conf 里面抽取出来，保持代码的可读性和可维护性呢？
操作其实很简单。
我们先在 geektime 的工作目录下，创建一个名为 lua 的目录，专门用来存放代码：">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-01-10T00:00:00+00:00">
    <meta property="article:tag" content="OpenResty从入门到实战">

  <meta itemprop="name" content="03__揪出隐藏在背后的那些子项目">
  <meta itemprop="description" content="你好，我是温铭。
我们先来揭晓上一节最后留下的思考题，如何把 Lua 代码从 nginx.conf 里面抽取出来，保持代码的可读性和可维护性呢？
操作其实很简单。
我们先在 geektime 的工作目录下，创建一个名为 lua 的目录，专门用来存放代码：">
  <meta itemprop="datePublished" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-01-10T00:00:00+00:00">
  <meta itemprop="wordCount" content="4449">
  <meta itemprop="keywords" content="OpenResty从入门到实战">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="03__揪出隐藏在背后的那些子项目">
  <meta name="twitter:description" content="你好，我是温铭。
我们先来揭晓上一节最后留下的思考题，如何把 Lua 代码从 nginx.conf 里面抽取出来，保持代码的可读性和可维护性呢？
操作其实很简单。
我们先在 geektime 的工作目录下，创建一个名为 lua 的目录，专门用来存放代码：">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Docs</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Docs</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">03__揪出隐藏在背后的那些子项目</h1>

      <div class="post-meta">
        <span class="post-time"> 10100-01-10 </span>
        <div class="post-category">
            <a href="/categories/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/"> 极客时间 </a>
            </div>
          <span class="more-meta"> 约 4449 字 </span>
          <span class="more-meta"> 预计阅读 9 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#openresty-安装后的目录结构">OpenResty 安装后的目录结构</a></li>
        <li><a href="#openresty-项目概览">OpenResty 项目概览</a>
          <ul>
            <li><a href="#nginx-c-模块"><strong>NGINX C 模块</strong></a></li>
            <li><a href="#lua-resty--周边库">lua-resty- 周边库</a></li>
            <li><a href="#自己维护的-luajit-分支">自己维护的 LuaJIT 分支</a></li>
            <li><a href="#测试框架">测试框架</a></li>
            <li><a href="#调试工具链">调试工具链</a></li>
            <li><a href="#打包相关">打包相关</a></li>
            <li><a href="#工程化工具">工程化工具</a></li>
          </ul>
        </li>
        <li><a href="#写在最后">写在最后</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>你好，我是温铭。</p>
<p>我们先来揭晓上一节最后留下的思考题，如何把 Lua 代码从 nginx.conf 里面抽取出来，保持代码的可读性和可维护性呢？</p>
<p>操作其实很简单。</p>
<p>我们先在 geektime 的工作目录下，创建一个名为 lua 的目录，专门用来存放代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ mkdir lua
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ cat lua/hello.lua
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ngx.say(&#34;hello, world&#34;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后修改 nginx.conf 的配置，把 content_by_lua_block 改为 content_by_lua_file：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">pid logs/nginx.pid;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">events {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	worker_connections 1024;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> http {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	server {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		listen 8080;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		location / {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			content_by_lua_file lua/hello.lua;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">			}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后，重启 OpenResty 的服务就可以了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ sudo kill -HUP `cat logs/nginx.pid`
</span></span></code></pre></td></tr></table>
</div>
</div><p>你可以使用 curl，验证是否返回了预期的结果。至于后面 Lua 代码的变更，你就可以直接修改 hello.lua 这个文件，而不是 nginx.conf 了。</p>
<p>其实，在上面这个小例子里面，也有几个有趣的地方：</p>
<ol>
<li>content_by_lua_file lua/hello.lua; 里面写的是相对路径，那么 OpenResty 是如何找到这个 Lua 文件的？</li>
<li>Lua 代码内容的变更，需要重启 OpenResty 服务才会生效，这样显然不方便调试，那么有没有什么即时生效的方法呢？</li>
<li>如何把 lua 代码所在的文件夹，加入到 OpenResty 的查找路径中呢？</li>
</ol>
<p>这几个问题，我鼓励你先自己思考一下，它们都可以在官方文档里面找到<a href="./lua-nginx-module.md#content%5Fby%5Flua%5Ffile">答案</a>。这也是为什么，我一直强调文档的重要性。</p>
<p>接下来我们一起来解答。先看第一个问题。如果原本给出的是相对路径，那么 OpenResty 在启动时，会把 OpenResty 启动的命令行参数中的 -p PATH 作为前缀，将相对路径拼接为绝对路径。这样，自然就可以顺利找到 Lua 文件。</p>
<p>再来看第二个问题。Lua 代码在第一个请求时会被加载，并默认缓存起来。所以在你每次修改 Lua 源文件后，都必须重新加载 OpenResty 才会生效。其实，在 nginx.conf 中关闭 lua_code_cache 就能避免重新加载，这一点你可以自己试试看。不过，特别需要注意的是，这种方法<strong>只能临时</strong>用于开发和调试，如果是线上部署，一定要记得打开缓存，否则会非常影响性能。</p>
<p>最后一个问题，OpenResty 提供了 lua_package_path 指令，可以设置 Lua 模块的查找路径。针对上面的例子，我们可以把 lua_package_path 设置为 <code>$prefix/lua/?.lua;;</code>，其中，</p>
<ul>
<li><code>$prefix</code>就是启动参数中的 -p PATH；</li>
<li><code>/lua/?.lua</code>表示 lua 目录下所有以 .lua 作为后缀的文件；</li>
<li>最后的两个分号，则代表内置的代码搜索路径。</li>
</ul>
<h2 id="openresty-安装后的目录结构">OpenResty 安装后的目录结构</h2>
<p>了解完第一个 hello world 程序后，我们继续追根究底，来看下 OpenResty 自身安装完成后，它的目录结构是怎样的，以及里面包含哪些文件。</p>
<p>我们先通过 -V 选项，查看 OpenResty 安装到了哪一个目录。下面的这个结果，我省略了很多模块的编译参数，这些我们稍后再来补上：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ openresty -V
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">nginx version: openresty/1.13.6.2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">built by clang 10.0.0 (clang-1000.10.44.4)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">built with OpenSSL 1.1.0h  27 Mar 2018
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">TLS SNI support enabled
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">configure arguments: --prefix=/usr/local/Cellar/openresty/1.13.6.2/nginx ...
</span></span></code></pre></td></tr></table>
</div>
</div><p>我本地是通过 brew 安装的，所以目录是<code>/usr/local/Cellar/openresty/1.13.6.2/nginx</code> ，和你的本地环境很可能不同。这其中主要包含了 bin、luajit、lualib、nginx、pod 这几个子目录。理解这几个文件夹的含义很重要，可以帮我们更好地学习 OpenResty。接下来，我们逐个来看一下。</p>
<p>首先是最重要的 bin 目录：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ ll /usr/local/Cellar/openresty/1.13.6.2/bin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">total 320
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin    19K  3 27 12:54 md2pod.pl
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin    15K  3 27 12:54 nginx-xml2pod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">lrwxr-xr-x  1 ming  admin    19B  3 27 12:54 openresty -&gt; ../nginx/sbin/nginx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin    62K  3 27 12:54 opm
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin    29K  3 27 12:54 resty
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin    15K  3 27 12:54 restydoc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-r-xr-xr-x  1 ming  admin   8.3K  3 27 12:54 restydoc-index
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里面既有我们上一节中提到的 OpenResty CLI resty，也有最核心的可执行文件 openresty，它其实是 nginx 的一个软链接。至于目录里面其他的一些工具，没有任何悬念，它们和 resty 一样，都是 Perl 脚本。</p>
<p>在这其中，opm 是包管理工具，可以通过它来管理各类第三方包，后面会有一节内容专门来讲；而 restydoc，则是我们第一节提到过的“老朋友”了，它是 OpenResty 提供的文档查看工具，你可以通过它来查看 OpenResty 和 NGINX 的使用文档：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ restydoc -s ngx.say
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ restydoc -s proxy_pass
</span></span></code></pre></td></tr></table>
</div>
</div><p>这段代码中的两个例子，分别查询了 OpenResty 的 API 和 NGINX 的指令。restydoc 这个工具，对服务端工程师的专注开发有很大帮助。</p>
<p>浏览完了 bin 目录，我们接着看下 pod 目录。先强调一点，这里的“pod”，和 k8s 里“pod”的概念完全没有关系。pod 是 Perl 里面的一种标记语言，用于给 Perl 的模块编写文档。pod 目录中存放的就是 OpenResty、NGINX、lua-resty-*、LuaJIT 的文档，这些就和刚才提到的 restydoc 联系在一起了。</p>
<p>接下来是熟悉的 nginx 和 luajit 这两个目录。这两个很好理解，主要存放 NGINX 和 LuaJIT 的可执行文件和依赖，是 OpenResty 的基石。很多人说 OpenResty 基于 Lua，这个说法其实并不准确，从上面我们可以看出，OpenResty 其实是基于 LuaJIT 的。</p>
<p>事实上，早期的 OpenResty 同时带有 Lua 和 LuaJIT，你可以通过编译选项，来决定使用 Lua 还是 LuaJIT。不过到了现在，Lua 逐渐被淘汰，就只支持更高性能的 LuaJIT 了。</p>
<p>最后，我们看下 lualib 目录。它里面存放的是 OpenResty 中使用到的 Lua 库，主要分为 ngx 和 resty 两个子目录。</p>
<ul>
<li>前者存放的是 <a href="./ngx.md">lua-resty-core</a> 这个官方项目中的 Lua 代码，里面都是基于 FFI 重新实现的 OpenResty API，后面我会用专门的文章来解释为什么要重新实现，这里你有个大概印象即可，不必深究。</li>
<li>而 resty 目录中存放的则是各种 lua-resty-* 项目包含的 Lua 代码，接下来我们会接触到。</li>
</ul>
<p>按照我讲课的惯例，到这一步我会给出这些目录源头的出处。这也是开源项目的乐趣之一，如果你喜欢打破砂锅问到底，那你总发现更多好玩的东西。</p>
<p>下面是 OpenResty 在 CentOS 中的<a href="./openresty.spec.md#L218">打包脚本</a>，里面包含了上面提到的所有目录，你可以自己了解一下。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%files
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%defattr(-,root,root,-)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> /etc/init.d/%{name}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/usr/bin/%{name}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/bin/openresty
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/site/lualib/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/luajit/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/lualib/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/nginx/html/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/nginx/logs/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/nginx/sbin/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/nginx/tapset/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%config(noreplace) %{orprefix}/nginx/conf/*
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{orprefix}/COPYRIGHT
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="openresty-项目概览">OpenResty 项目概览</h2>
<p>提到 OpenResty，你应该会想到 lua-nginx-module。没错，<strong>这个 NGINX 的 C 模块确实是 OpenResty 的核心，但它并不等价于 OpenResty</strong>。很多工程师都会把 OpenResty 叫做 ngx lua，有不少技术大会的分享和出版的书籍中也是用的这个叫法，这其实是不严谨的，也是 OpenResty 社区不提倡的。</p>
<p>下面我来讲讲为什么，以及 OpenResty 中除了 lua-nginx-module，还有哪些其他的关联项目。</p>
<p>打开 OpenResty 在 GitHub 的 <a href="./openresty.md">项目主页</a>，你可以看到 OpenResty 包含了 68 个公开的项目，大概分为以下 7 类，下面我来分别简单介绍下，让你有个初步的印象，这样你后面学习起来也轻松一些。</p>
<h3 id="nginx-c-模块"><strong>NGINX C 模块</strong></h3>
<p>OpenResty 的项目命名都是有规范的，以 <code>*-nginx-module</code>命名的就是 NGINX 的 C 模块。</p>
<p>OpenResty 中一共包含了 20 多个 C 模块，我们在本节最开始使用的 openresty -V 中，也可以看到这些 C 模块：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">$</span> <span class="n">openresty</span> <span class="o">-</span><span class="n">V</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">nginx</span> <span class="n">version</span><span class="p">:</span> <span class="n">openresty</span><span class="o">/</span><span class="mf">1.13</span><span class="o">.</span><span class="mf">6.2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">by</span> <span class="n">clang</span> <span class="mf">10.0</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="n">clang</span><span class="o">-</span><span class="mf">1000.10</span><span class="o">.</span><span class="mf">44.4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">built</span> <span class="n">with</span> <span class="n">OpenSSL</span> <span class="mf">1.1</span><span class="o">.</span><span class="mi">0</span><span class="n">h</span>  <span class="mi">27</span> <span class="n">Mar</span> <span class="mi">2018</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">TLS</span> <span class="n">SNI</span> <span class="n">support</span> <span class="n">enabled</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">configure</span> <span class="n">arguments</span><span class="p">:</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">openresty</span><span class="o">/</span><span class="mf">1.13</span><span class="o">.</span><span class="mf">6.2</span><span class="o">/</span><span class="n">nginx</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">cc</span><span class="o">-</span><span class="n">opt</span><span class="o">=</span><span class="s1">&#39;-O2 -I/usr/local/include -I/usr/local/opt/pcre/include -I/usr/local/opt/openresty-openssl/include&#39;</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">ngx_devel_kit</span><span class="o">-</span><span class="mf">0.3</span><span class="o">.</span><span class="mi">0</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">echo</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.61</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">xss</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.06</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">ngx_coolkit</span><span class="o">-</span><span class="mf">0.2</span><span class="n">rc3</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">set</span><span class="o">-</span><span class="n">misc</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.32</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">form</span><span class="o">-</span><span class="n">input</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.12</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">encrypted</span><span class="o">-</span><span class="n">session</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.08</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">srcache</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.31</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">ngx_lua</span><span class="o">-</span><span class="mf">0.10</span><span class="o">.</span><span class="mi">13</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">ngx_lua_upstream</span><span class="o">-</span><span class="mf">0.07</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">headers</span><span class="o">-</span><span class="n">more</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.33</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">array</span><span class="o">-</span><span class="k">var</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.05</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">memc</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.19</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">redis2</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.15</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">redis</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">module</span><span class="o">-</span><span class="mf">0.3</span><span class="o">.</span><span class="mi">7</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">module</span><span class="o">=../</span><span class="n">ngx_stream_lua</span><span class="o">-</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">5</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">ld</span><span class="o">-</span><span class="n">opt</span><span class="o">=</span><span class="s1">&#39;-Wl,-rpath,/usr/local/Cellar/openresty/1.13.6.2/luajit/lib -L/usr/local/lib -L/usr/local/opt/pcre/lib -L/usr/local/opt/openresty-openssl/lib&#39;</span> <span class="o">--</span><span class="n">pid</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">openresty</span><span class="o">.</span><span class="n">pid</span> <span class="o">--</span><span class="n">lock</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">openresty</span><span class="o">.</span><span class="n">lock</span> <span class="o">--</span><span class="n">conf</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">openresty</span><span class="o">/</span><span class="n">nginx</span><span class="o">.</span><span class="n">conf</span> <span class="o">--</span><span class="n">http</span><span class="o">-</span><span class="nb">log</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">access</span><span class="o">.</span><span class="n">log</span> <span class="o">--</span><span class="n">error</span><span class="o">-</span><span class="nb">log</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">pcre</span><span class="o">-</span><span class="n">jit</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">ipv6</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_ssl_preread_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_v2_module</span> <span class="o">--</span><span class="n">without</span><span class="o">-</span><span class="n">mail_pop3_module</span> <span class="o">--</span><span class="n">without</span><span class="o">-</span><span class="n">mail_imap_module</span> <span class="o">--</span><span class="n">without</span><span class="o">-</span><span class="n">mail_smtp_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_stub_status_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_realip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_addition_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_auth_request_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_secure_link_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_random_index_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_geoip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_gzip_static_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_sub_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_dav_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_flv_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_mp4_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_gunzip_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">threads</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">dtrace</span><span class="o">-</span><span class="n">probes</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">stream_ssl_module</span> <span class="o">--</span><span class="n">with</span><span class="o">-</span><span class="n">http_ssl_module</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里<code>--add-module=</code>后面跟着的，就是 OpenResty 的 C 模块。其中，最核心的就是 lua-nginx-module 和 stream-lua-nginx-module，前者用来处理七层流量，后者用来处理四层流量。</p>
<p><strong>这些 C 模块中，有些是需要特别注意的，虽然默认编译进入了 OpenResty，但并不推荐使用</strong>。比如 redis2-nginx-module、redis-nginx-module 和 memc-nginx-module，它们是用来和 redis 以及 memcached 交互使用的。这些 C 库是 OpenResty 早期推荐使用的，但在 cosocket 功能加入之后，它们都已经被 lua-resty-redis 和 lua-resty-memcached 替代，处于疏于维护的状态。</p>
<p>OpenResty 后面也不会开发更多的 NGINX C 库，而是专注在基于 cosocket 的 Lua 库上，后者才是未来。</p>
<h3 id="lua-resty--周边库">lua-resty- 周边库</h3>
<p>OpenResty 官方仓库中包含 18 个 lua-resty-* 库，涵盖 Redis、MySQL、memcached、websocket、dns、流量控制、字符串处理、进程内缓存等常用库。除了官方自带的之外，还有更多的第三方库。它们非常重要，所以下一章节，我们会花更多的篇幅来专门介绍这些周边库。</p>
<h3 id="自己维护的-luajit-分支">自己维护的 LuaJIT 分支</h3>
<p>OpenResty 除了维护自己的 OpenSSL patch 外，还维护了自己的 <a href="./luajit2.md">LuaJIT 分支</a>。在 2015 年，LuaJIT 的作者 Mike Pall 宣布退休，寻找新的 LuaJIT 维护者，但 Mike 并没有找到合适的维护者，他现在主要是做 bugfix 的维护工作，新功能的开发也已经暂停，所以 OpenResty 维护着自己的 LuaJIT 分支。</p>
<p><strong>相对于 Lua，LuaJIT 增加了不少独有的函数，这些函数非常重要</strong>，但知道的工程师并不多，算是 _ 半隐藏技能 _，后面我也会专门介绍。</p>
<h3 id="测试框架">测试框架</h3>
<p>OpenResty 的测试框架是<a href="./test-nginx.md">test-nginx</a>，同样也是用 Perl 语言来开发的，从名字上就能看出来，它是专门用来测试 NGINX 相关的项目。OpenResty 官方的所有 C 模块和 lua-resty 库的测试案例，都是由 test-nginx 驱动的。</p>
<p>这个框架和常见的基于断言的框架不同，是一套更强大和独立的系统，我们后面会花几节课来专门学习。</p>
<p>事实上，有些 OpenResty 的代码贡献者也没有搞清楚这个测试框架，有时候提交的 PR 中包含了不少复杂的 C 和 Lua 代码，但对编写对应的测试案例一事，还是经常发怵。所以，如果你已经查看过一些 OpenResty 项目中<code>/t</code>目录里面的测试案例，却仍然一头雾水，先别急着怀疑自己，大部分人都是一样的。</p>
<p>除了 test-nginx 之外，<a href="./mockeagain.md">mockeagain</a> 这个项目可以模拟慢速的网络，让程序每次只读写一个字节。对于 web 服务器来说，这是一个很有用的工具。</p>
<h3 id="调试工具链">调试工具链</h3>
<p>OpenResty 项目在如何科学和动态地调试代码上，花费了大量的精力，可以说是达到了极致。OpenResty 的作者章亦春专门写了<a href="./dynamic-tracing.md">一篇文章</a>，来介绍动态追踪技术。我强烈推荐给你，看完也有助于理解对应的工具链。</p>
<p><a href="./openresty-systemtap-toolkit.md">openresty-systemtap-toolkit</a> 和 <a href="./stapxx.md">stapxx</a> 这两个 OpenResty 的项目，都基于 systemtap 这个动态调试和追踪工具。使用 systemtap 最大的优势，便是实现活体分析，同时对目标程序完全无侵入。</p>
<p>打个比方，systemtap，就像是我们去医院照了个 CT，无痛无感知。更棒的是，systemtap 可以生成直观的火焰图来做性能分析，后面我也会专门介绍，这里先放一个火焰图，让你直观上有个感性的认识：</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/OpenResty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/1a22177ffc165771517151bbf773a199.png" alt=""></p>
<h3 id="打包相关">打包相关</h3>
<p>OpenResty 在不同发行操作系统（比如 CentOS、Ubuntu、MacOS 等）版本中的打包脚本，出于更细可控力度的目的，都是手工编写的。我们在介绍安装后目录结构的时候，就已经涉及到了这些打包相关的项目：<a href="./openresty-packaging.md">openresty-packaging</a> 和 <a href="./homebrew-brew.md">home-brew</a>。如果你对此有兴趣，可以自行学习，这里我就不再赘述了。</p>
<h3 id="工程化工具">工程化工具</h3>
<p>除了上面这些比较大块儿的项目之外，OpenResty 还有一些负责工程化的工具，大都也是“深藏闺中”。</p>
<p>比如 <a href="./openresty-devel-utils.md">openresty-devel-utils</a> 就是开发 OpenResty 和 NGINX 的工具集。它们也都使用 Perl 开发，其中大部分的工具都是没有文档的。但对于 OpenResty 的开发者来说，这些工具又是非常有用的。</p>
<p>这里我先挑几个简单介绍一下。</p>
<p><a href="./lj-releng.md">lj-releng</a> 是一个简单有效的 LuaJIT 代码检测工具，类似 luacheck，可以找出全局变量等潜在的问题。</p>
<p><a href="./reindex.md">reindex</a> 从名字来看是重建索引的意思，它其实是格式化 test-nginx 测试案例的工具，可以重新排列测试案例的编号，以及去除多余的空白符。reindex 可以说是 OpenResty 开发者每天都会用到的工具之一。</p>
<p><a href="./opsboy.md">opsboy</a> 也是一个深藏不露的项目，主要用于自动化部署。OpenResty 每次发布版本前，都会在 AWS EC2 集群上做完整的回归测试，详细的文档你可以参考<a href="./ec2-test-cluster.md">官方文档</a>，而这个回归测试正是由 opsboy 来部署和驱动的。</p>
<p>opsboy 是一个用 Perl 实现的 DSL（领域特定语言）。实际上，OpenResty 的作者非常喜欢创造各种不同的 DSL 来解决问题。</p>
<h2 id="写在最后">写在最后</h2>
<p>今天，我们主要学习了 OpenResty 安装后的目录结构，以及背后的一些子项目。希望你学完今天的内容后，能够了解更多 OpenResty 的项目。OpenResty 已经远远超出了 NGINX 负载均衡和反向代理的范畴，实现了自己的生态，下一次我们会详细聊聊这方面。</p>
<p>对于今天的内容，你有哪些疑惑和问题吗？欢迎留言和我分享，也欢迎你把这篇文章转发给你的同事、朋友，一起学习高效开发。</p>
<p><img src="https://raw.githubusercontent.com/epic1268/images/master/OpenResty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/12bf8dad402b50769d64b4fa7ee66191.png" alt=""></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content"></span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        10100-01-10
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/openresty%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/">OpenResty从入门到实战</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E8%B7%9F%E7%9D%80%E9%AB%98%E6%89%8B%E5%AD%A6%E5%A4%8D%E7%9B%98/03__%E6%95%99%E7%BB%83%E6%8A%80%E6%9C%AF%E6%80%8E%E4%B9%88%E5%81%9A%E5%A4%8D%E7%9B%98%E6%89%8D%E8%83%BD%E5%8C%96%E8%A7%A3%E5%86%B2%E7%AA%81/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">03__教练技术：怎么做复盘才能化解冲突？</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/%E9%87%8D%E5%AD%A6%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/03__%E7%9F%A9%E9%98%B5%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AF%B4%E7%9F%A9%E9%98%B5%E6%98%AF%E7%BA%BF%E6%80%A7%E6%96%B9%E7%A8%8B%E7%BB%84%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E8%A1%A8%E8%BE%BE/">
            <span class="next-text nav-default">03__矩阵：为什么说矩阵是线性方程组的另一种表达？</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2024 - 
    2025<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FVZ07KBD4X"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FVZ07KBD4X');
        }
      </script>






</body>
</html>
